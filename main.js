!function(){"use strict";var e={d:function(t,r){for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p:""};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}e.d({},{ob:function(){return Se},cp:function(){return he},eD:function(){return de},eF:function(){return _e}});var n=function(){return e=function e(t,r,o,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=this._createUniqueId(),this._name=t.name,this._url=t.url,this._cardSelector=r,this._handleCardClick=o,this._handleDeleteClick=n},(t=[{key:"_createUniqueId",value:function(){return Math.floor(Math.random()*(new Date).getTime()*3).toString()}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".elements__card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._popupImage=document.querySelector("#popup__image"),this._popupOverlay=document.querySelector(".overlay"),this._element.addEventListener("click",(function(t){t.target.classList.contains("elements__card-btn-hearth")&&t.target.classList.toggle("elements__card-btn-hearth_active"),t.target.classList.contains("elements__card-photo-imagen")&&e._handleCardClick(t),t.target.classList.contains("elements__card-btn-trash")&&e._handleDeleteClick(t)}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".elements__card-photo-imagen").src=this._url,this._element.querySelector(".elements__card-photo-imagen").alt=this._name,this._element.querySelector(".elements__card-photo-imagen").setAttribute("id",this._id),this._element.querySelector(".elements__card-title").textContent=this._name,this._element}}])&&r(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var p=function(){return e=function e(t,r,o){var n=o.openPopupClass,i=o.openOverlayClass,u=o.closeButtonSelector,a=o.popupUbication,p=o.popupOverlay;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupTemplateSelector=t,this._popupSelector=r,this._openPopupClass=n,this._overlayOpenClass=i,this._closeButtonSelector=u,this._popupUbication=a,this._popupOverlay=p},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._popupTemplateSelector).content.querySelector(this._popupSelector).cloneNode(!0)}},{key:"generatePopup",value:function(){return this._popup=this._getTemplate(),this._setEventListeners(),this._popup}},{key:"open",value:function(){document.querySelector(this._popupUbication).classList.add(this._openPopupClass),this._popupOverlay.classList.add(this._overlayOpenClass)}},{key:"close",value:function(){document.querySelector(this._popupUbication).classList.remove(this._openPopupClass),this._popupOverlay.classList.remove(this._overlayOpenClass),this._popup.closest(this._popupSelector).remove()}},{key:"_setEventListeners",value:function(){var e=this;this._popup.querySelector(this._closeButtonSelector).addEventListener("click",(function(){return e.close()})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()})),this._popupOverlay.addEventListener("click",(function(){e.close()}))}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,s(o.key),o)}}function s(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=c(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}function f(e,t,r){return t=v(t),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},m.apply(null,arguments)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}var _=function(e){function t(e,r,o,n){var i,u=o.openPopupClass,a=o.openOverlayClass,p=o.closeButtonSelector,c=o.popupUbication,l=o.popupOverlay,s=o.inputSelector,y=o.submitButtonSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=f(this,t,[e,r,{openPopupClass:u,openOverlayClass:a,closeButtonSelector:p,popupUbication:c,popupOverlay:l}]))._handleFormSubmit=n,i._inputSelector=s,i._submitButtonSelector=y,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),r=t,(o=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popup.querySelectorAll(this._inputSelector),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"disableConfirmButton",value:function(){document.querySelector(this._popupSelector).querySelector(this._submitButtonSelector).classList.add("popup__btn-submit_inactive"),document.querySelector(this._popupSelector).querySelector(this._submitButtonSelector).setAttribute("disabled",!0)}},{key:"_setEventListeners",value:function(){var e=this;m(v(t.prototype),"_setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}}])&&l(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(p);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,S(o.key),o)}}function S(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}function g(e,t,r){return t=P(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,r||[],P(e).constructor):t.apply(e,r))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},O.apply(null,arguments)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}var j=function(e){function t(e,r,o,n){var i,u=o.openPopupClass,a=o.openOverlayClass,p=o.closeButtonSelector,c=o.popupUbication,l=o.imagePreviewClass,s=o.imageTitleClass,f=o.popupOverlay;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=g(this,t,[e,r,{openPopupClass:u,openOverlayClass:a,closeButtonSelector:p,popupUbication:c,popupOverlay:f}]))._imagePreviewClass=l,i._imageTitleClass=s,i._name=n.name,i._image=n.image,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),r=t,(o=[{key:"open",value:function(){O(P(t.prototype),"open",this).call(this);var e=this._popup.querySelector(this._imagePreviewClass);e.src=this._image,e.alt=this._name,this._popup.querySelector(this._imageTitleClass).textContent=this._name}}])&&h(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(p);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function q(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,L(o.key),o)}}function L(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=E(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}var B=function(){return e=function e(t,r){var o=t.data,n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=o,this._renderer=n,this._container=document.querySelector(r)},(t=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"setItem",value:function(e){this._container.prepend(e)}}])&&q(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function T(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,I(o.key),o)}}function I(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=k(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:t+""}var U=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=t,this._profileDescription=r},(t=[{key:"setUserInfo",value:function(e){this._profileName.textContent=e.name,this._profileDescription.textContent=e.about}},{key:"getUserInfo",value:function(){document.querySelector("#name-profile").value=this._profileName.textContent,document.querySelector("#about-profile").value=this._profileDescription.textContent}}])&&T(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),R=e.p+"92eb839643254025634c.jpg",D=e.p+"70818c86481682649335.jpg",A=e.p+"04f7e77a9c511821591a.jpg",x=e.p+"4e08bda61b074bbceeca.jpg",V=e.p+"087ca7fdeaa6e199f18e.jpg",N=e.p+"22da2aef3d857356965a.jpg",F=document.querySelector(".profile__name"),M=document.querySelector(".profile__description"),G=document.querySelector(".profile__avatar-container"),z=document.querySelector("#avatarEditButton"),H=document.querySelector(".profile__avatar-image"),J=document.querySelector(".profile__edit-button"),K=document.querySelector(".profile__add-button"),Q=[{name:"Estatua de la libertad",url:R},{name:"Golden Gate Bridge",url:D},{name:"Cataratas del Niágara",url:A},{name:"Monte Rushmore",url:x},{name:"Space Neddle",url:V},{name:"Empire State Building",url:N}],W={formSelector:".popup__container",inputSelector:".popup__input",submitButtonSelector:".popup__btn-submit",inactiveButtonClass:"popup__btn-submit_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active",errorSelector:".popup__input-error"},X={openPopupClass:"img-popup_opened",openOverlayClass:"overlay_opened",closeButtonSelector:".img-popup__btn-close",popupUbication:".img-popup",imagePreviewClass:".img-popup__preview",imageTitleClass:".img-popup__title",popupOverlay:document.querySelector(".overlay")},Y={openPopupClass:"popup_opened",openOverlayClass:"overlay_opened",closeButtonSelector:".popup__btn-close",popupUbication:".popup",popupOverlay:document.querySelector(".overlay"),inputSelector:".popup__input",submitButtonSelector:".popup__btn-submit"},Z={openPopupClass:"confirmation-popup_opened",openOverlayClass:"overlay_opened",closeButtonSelector:".confirmation-popup__btn-close",popupUbication:".confirmation-popup",popupOverlay:document.querySelector(".overlay"),submitButtonSelector:".confirmation-popup__btn-submit"},$={openPopupClass:"avatar-popup_opened",openOverlayClass:"overlay_opened",closeButtonSelector:".avatar-popup__btn-close",popupUbication:".avatar-popup",popupOverlay:document.querySelector(".overlay"),inputSelector:".avatar-popup__input",submitButtonSelector:".avatar-popup__btn-submit"},ee={formSelector:".avatar-popup__container",inputSelector:".avatar-popup__input",submitButtonSelector:".avatar-popup__btn-submit",inactiveButtonClass:"avatar-popup__btn-submit_inactive",inputErrorClass:"avatar-popup__input_type_error",errorClass:"avatar-popup__input-error_active",errorSelector:".avatar-popup__input-error"};function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ie(o.key),o)}}function oe(e,t,r){return t&&re(e.prototype,t),r&&re(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ne(e,t,r){return(t=ie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=te(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}var ue=oe((function e(t,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ne(this,"_showError",(function(e,t,r,o,n){var i=e.querySelector(".".concat(t.id,"-input-error"));t.classList.add(o),i.textContent=r,i.classList.add(n)})),ne(this,"_hideError",(function(e,t,r,o){var n=e.querySelector(".".concat(t.id,"-input-error"));t.classList.remove(r),n.classList.remove(o),n.textContent=""})),ne(this,"_checkInputValidity",(function(e,t,r,n){t.validity.valid?o._hideError(e,t,r,n):o._showError(e,t,t.validationMessage,r,n)})),ne(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),ne(this,"_toggleButtonState",(function(e,t,r){o._hasInvalidInput(e)?(t.classList.add(r),t.setAttribute("disabled",!0)):(t.classList.remove(r),t.removeAttribute("disabled"))})),ne(this,"_setEventListeners",(function(e,t,r,n,i,u){var a=Array.from(e.querySelectorAll(t)),p=e.querySelector(r);o._toggleButtonState(a,p,u),a.forEach((function(t){t.addEventListener("input",(function(){o._checkInputValidity(e,t,n,i),o._toggleButtonState(a,p,u)}))}))})),ne(this,"enableValidation",(function(){Array.from(document.querySelectorAll(o._config.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),o._setEventListeners(e,o._config.inputSelector,o._config.submitButtonSelector,o._config.inputErrorClass,o._config.errorClass,o._config.inactiveButtonClass)}))})),ne(this,"resetValidation",(function(){var e=Array.from(document.querySelectorAll(o._config.inputSelector)),t=Array.from(document.querySelectorAll(o._config.errorSelector));e.forEach((function(e){e.classList.remove(o._config.inputErrorClass)})),t.forEach((function(e){e.classList.remove(o._config.errorClass)}))})),this._config=r,this._popup=t.querySelector(this._config.formSelector)}));function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function pe(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ce(o.key),o)}}function ce(e){var t=function(e,t){if("object"!=ae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=ae(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}function le(e,t,r){return t=ye(t),function(e,t){if(t&&("object"==ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,se()?Reflect.construct(t,r||[],ye(e).constructor):t.apply(e,r))}function se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(se=function(){return!!e})()}function fe(){return fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ye(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},fe.apply(null,arguments)}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}var ve=function(e){function t(e,r,o,n){var i,u=o.openPopupClass,a=o.openOverlayClass,p=o.closeButtonSelector,c=o.popupUbication,l=o.popupOverlay,s=o.submitButtonSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=le(this,t,[e,r,{openPopupClass:u,openOverlayClass:a,closeButtonSelector:p,popupUbication:c,popupOverlay:l}]))._handleFormSubmit=n,i._submitButtonSelector=s,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(t,e),r=t,(o=[{key:"_setEventListeners",value:function(){var e=this;fe(ye(t.prototype),"_setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit()}))}}])&&pe(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(p),be=new B({data:Q,renderer:function(e){var t=new n(e,"#card-template",(function(e){var t=new j("#popupImageTemplate","#popup__image",X,{name:e.target.alt,image:e.target.currentSrc}),r=t.generatePopup();t.open(),document.querySelector(X.popupUbication).prepend(r)}),(function(e){var t=new ve("#popupConfirmationTemplate","#popup__confirmation",Z,(function(){e.target.closest(".elements__card").remove();var r=Q.findIndex((function(t){return t.id===e.target.previousElementSibling.id}));Q.splice(r,1),t.close()})),r=t.generatePopup();t.open(),document.querySelector(Z.popupUbication).prepend(r)}));e.id=t._id;var r=t.generateCard();be.setItem(r)}},".elements");be.renderItems();var _e=new U(F,M),de=new _("#popupProfileTemplate","#popup__profile",Y,(function(e){_e.setUserInfo(e),de.close()})),he=new _("#popupPlaceTemplate","#popup__place",Y,(function(e){var t=new n(e,"#card-template",(function(e){var t=new j("#popupImageTemplate","#popup__image",X,{name:e.target.alt,image:e.target.currentSrc}),r=t.generatePopup();t.open(),document.querySelector(X.popupUbication).prepend(r)}),(function(e){var t=new ve("#popupConfirmationTemplate","#popup__confirmation",Z,(function(){e.target.closest(".elements__card").remove();var r=Q.findIndex((function(t){return t.id===e.target.previousElementSibling.id}));Q.splice(r,1),t.close()})),r=t.generatePopup();t.open(),document.querySelector(Z.popupUbication).prepend(r)}));e.id=t._id,Q.push(e);var r=t.generateCard();be.setItem(r),he.close()})),Se=new _("#popupAvatarTemplate","#popup__avatar",$,(function(e){H.src=e.avatar,Se.close()}));J.addEventListener("click",(function(){var e=de.generatePopup();de.open(),document.querySelector(".popup").prepend(e),_e.getUserInfo(),new ue(e,W).enableValidation(),de.disableConfirmButton()})),K.addEventListener("click",(function(){var e=he.generatePopup();he.open(),document.querySelector(".popup").prepend(e),new ue(e,W).enableValidation()})),G.addEventListener("mouseover",(function(){z.classList.add("profile__avatar-edit_shown")})),G.addEventListener("mouseout",(function(){z.classList.remove("profile__avatar-edit_shown")})),z.addEventListener("click",(function(){var e=Se.generatePopup();Se.open(),document.querySelector(".avatar-popup").prepend(e),new ue(e,ee).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TXNHLEVBQVErQyxHQUFZaEIsZ0JBQzFCZ0IsR0FBWWYsT0FDWjlJLFNBQVNDLGNBQWMsaUJBQWlCNEUsUUFBUWlDLEdBQ2hELElBQUlGLEdBQWNFLEVBQU9ILElBQXdCcUQsa0JBQ25ELEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3Jtcy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Db25maXJtYXRpb25Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3V0aWxzL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKCBkYXRhLCBjYXJkU2VsZWN0b3IsIC8qIGFycmF5LCAqLyBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9pZCA9IHRoaXMuX2NyZWF0ZVVuaXF1ZUlkKClcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl91cmwgPSBkYXRhLnVybDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIC8qIHRoaXMuX2FycmF5ID0gYXJyYXk7ICovXHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gIH07XHJcblxyXG4gIF9jcmVhdGVVbmlxdWVJZCAoKSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbmV3IERhdGUoKS5nZXRUaW1lKCkgKiAzKS50b1N0cmluZygpO1xyXG4gIH07XHJcblxyXG4gIC8vZnVuY2nDs24gcGFyYSBjbG9uYXIgbGEgcGxhbnRpbGxhXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgbmV3Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIG5ld0NhcmQ7XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIC8vZXZlbnRvIHBhcmEgZnVuY2lvbmFsaWRhZCBkZWwgYm90b24gZGUgbGlrZVxyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJlbGVtZW50c19fY2FyZC1idG4taGVhcnRoXCIpKSB7XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudHNfX2NhcmQtYnRuLWhlYXJ0aF9hY3RpdmVcIik7XHJcbiAgICAgIH07XHJcbiAgICAgIC8vZXZlbnRvIHBhcmEgbW9zdHJhciBlbCBwb3BVcCBkZSBsYSB2aXN1YWxpemFjacOzbiBkZSBsYSBpbWFnZW5cclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZWxlbWVudHNfX2NhcmQtcGhvdG8taW1hZ2VuXCIpKXtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soZXZ0KTtcclxuICAgICAgfTtcclxuICAgICAgLy9ldmVudG8gcGFyYSBmdW5jaW9uYWxpZGFkIGRlbCBib3RvbiBkZSBlbGltaW5hclxyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJlbGVtZW50c19fY2FyZC1idG4tdHJhc2hcIikpe1xyXG4gICAgICAgIC8qIGV2dC50YXJnZXQuY2xvc2VzdChcIi5lbGVtZW50c19fY2FyZFwiKS5yZW1vdmUoKTtcclxuICAgICAgICBsZXQgaW5kaWNlRWxpbWluYXIgPSB0aGlzLl9hcnJheS5maW5kSW5kZXgoXHJcbiAgICAgICAgICAoZWxlbWVudCkgPT4gZWxlbWVudC5pZCA9PT0gZXZ0LnRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlkXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLl9hcnJheS5zcGxpY2UoaW5kaWNlRWxpbWluYXIsIDEpOyAqL1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKGV2dClcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vZnVuY2nDs24gcGFyYSBjcmVhciBsYSB0YXJqZXRhXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkLXBob3RvLWltYWdlblwiKS5zcmMgPSB0aGlzLl91cmw7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmQtcGhvdG8taW1hZ2VuXCIpLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmQtcGhvdG8taW1hZ2VuXCIpLnNldEF0dHJpYnV0ZShcImlkXCIsIHRoaXMuX2lkICk7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmQtdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH07XHJcbn07XHJcblxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcG9wdXBUZW1wbGF0ZVNlbGVjdG9yLFxyXG4gICAgcG9wdXBTZWxlY3RvcixcclxuICAgIHtcclxuICAgICAgb3BlblBvcHVwQ2xhc3MsXHJcbiAgICAgIG9wZW5PdmVybGF5Q2xhc3MsXHJcbiAgICAgIGNsb3NlQnV0dG9uU2VsZWN0b3IsXHJcbiAgICAgIHBvcHVwVWJpY2F0aW9uLFxyXG4gICAgICBwb3B1cE92ZXJsYXlcclxuICAgIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwVGVtcGxhdGVTZWxlY3RvciA9IHBvcHVwVGVtcGxhdGVTZWxlY3RvclxyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3JcclxuICAgIHRoaXMuX29wZW5Qb3B1cENsYXNzID0gb3BlblBvcHVwQ2xhc3M7XHJcbiAgICB0aGlzLl9vdmVybGF5T3BlbkNsYXNzID0gb3Blbk92ZXJsYXlDbGFzcztcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uU2VsZWN0b3IgPSBjbG9zZUJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5fcG9wdXBVYmljYXRpb24gPSBwb3B1cFViaWNhdGlvbjtcclxuICAgIHRoaXMuX3BvcHVwT3ZlcmxheSA9IHBvcHVwT3ZlcmxheTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IG5ld1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFRlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFNlbGVjdG9yKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gbmV3UG9wdXA7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZVBvcHVwKCkge1xyXG4gICAgdGhpcy5fcG9wdXAgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9wb3B1cDtcclxuICB9O1xyXG5cclxuICBvcGVuKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFViaWNhdGlvbikuY2xhc3NMaXN0LmFkZCh0aGlzLl9vcGVuUG9wdXBDbGFzcyk7XHJcbiAgICB0aGlzLl9wb3B1cE92ZXJsYXkuY2xhc3NMaXN0LmFkZCh0aGlzLl9vdmVybGF5T3BlbkNsYXNzKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFViaWNhdGlvbikuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcGVuUG9wdXBDbGFzcyk7XHJcbiAgICB0aGlzLl9wb3B1cE92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vdmVybGF5T3BlbkNsYXNzKTtcclxuICAgIHRoaXMuX3BvcHVwLmNsb3Nlc3QodGhpcy5fcG9wdXBTZWxlY3RvcikucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX2Nsb3NlQnV0dG9uU2VsZWN0b3IpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybXMgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwb3B1cFRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICBwb3B1cFNlbGVjdG9yLFxyXG4gICAge1xyXG4gICAgICBvcGVuUG9wdXBDbGFzcyxcclxuICAgICAgb3Blbk92ZXJsYXlDbGFzcyxcclxuICAgICAgY2xvc2VCdXR0b25TZWxlY3RvcixcclxuICAgICAgcG9wdXBVYmljYXRpb24sXHJcbiAgICAgIHBvcHVwT3ZlcmxheSxcclxuICAgICAgaW5wdXRTZWxlY3RvcixcclxuICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3IsXHJcbiAgICB9LFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdFxyXG4gICkge1xyXG4gICAgc3VwZXIoXHJcbiAgICAgIHBvcHVwVGVtcGxhdGVTZWxlY3RvcixcclxuICAgICAgcG9wdXBTZWxlY3RvcixcclxuICAgICAge1xyXG4gICAgICAgIG9wZW5Qb3B1cENsYXNzLFxyXG4gICAgICAgIG9wZW5PdmVybGF5Q2xhc3MsXHJcbiAgICAgICAgY2xvc2VCdXR0b25TZWxlY3RvcixcclxuICAgICAgICBwb3B1cFViaWNhdGlvbixcclxuICAgICAgICBwb3B1cE92ZXJsYXksXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBpbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQ29uZmlybUJ1dHRvbigpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXBTZWxlY3RvcikucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvcikuY2xhc3NMaXN0LmFkZChcInBvcHVwX19idG4tc3VibWl0X2luYWN0aXZlXCIpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFNlbGVjdG9yKS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpXHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwb3B1cFRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICBwb3B1cFNlbGVjdG9yLFxyXG4gICAge1xyXG4gICAgICBvcGVuUG9wdXBDbGFzcyxcclxuICAgICAgb3Blbk92ZXJsYXlDbGFzcyxcclxuICAgICAgY2xvc2VCdXR0b25TZWxlY3RvcixcclxuICAgICAgcG9wdXBVYmljYXRpb24sXHJcbiAgICAgIGltYWdlUHJldmlld0NsYXNzLFxyXG4gICAgICBpbWFnZVRpdGxlQ2xhc3MsXHJcbiAgICAgIHBvcHVwT3ZlcmxheSxcclxuICAgIH0sXHJcbiAgICBkYXRhXHJcbiAgKSB7XHJcbiAgICBzdXBlcihcclxuICAgICAgcG9wdXBUZW1wbGF0ZVNlbGVjdG9yLFxyXG4gICAgICBwb3B1cFNlbGVjdG9yLFxyXG4gICAgICB7XHJcbiAgICAgICAgb3BlblBvcHVwQ2xhc3MsXHJcbiAgICAgICAgb3Blbk92ZXJsYXlDbGFzcyxcclxuICAgICAgICBjbG9zZUJ1dHRvblNlbGVjdG9yLFxyXG4gICAgICAgIHBvcHVwVWJpY2F0aW9uLFxyXG4gICAgICAgIHBvcHVwT3ZlcmxheSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2ltYWdlUHJldmlld0NsYXNzID0gaW1hZ2VQcmV2aWV3Q2xhc3M7XHJcbiAgICB0aGlzLl9pbWFnZVRpdGxlQ2xhc3MgPSBpbWFnZVRpdGxlQ2xhc3M7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2UgPSBkYXRhLmltYWdlO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIGNvbnN0IGltYWdlVmFsdWUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX2ltYWdlUHJldmlld0NsYXNzKTtcclxuICAgIGltYWdlVmFsdWUuc3JjID0gdGhpcy5faW1hZ2U7XHJcbiAgICBpbWFnZVZhbHVlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICBjb25zdCBpbWFnZVRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9pbWFnZVRpdGxlQ2xhc3MpO1xyXG4gICAgaW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgc2V0SXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoIHByb2ZpbGVOYW1lLCBwcm9maWxlRGVzY3JpcHRpb24gKXtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gcHJvZmlsZU5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24gPSBwcm9maWxlRGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhmb3JtRGF0YSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBmb3JtRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZm9ybURhdGEuYWJvdXQ7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1wcm9maWxlXCIpLnZhbHVlID0gdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Fib3V0LXByb2ZpbGVcIikudmFsdWUgPSB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBsaWJlcnR5IGZyb20gXCIuLi9pbWFnZXMvZXN0YXR1YS1kZS1sYS1saWJlcnRhZC5qcGdcIjtcclxuaW1wb3J0IGdvbGRlbkdhdGUgZnJvbSBcIi4uL2ltYWdlcy9Hb2xkZW4tR2F0ZS1CcmlkZ2UuanBnXCI7XHJcbmltcG9ydCBuaWFnYXJhRmFsbHMgZnJvbSBcIi4uL2ltYWdlcy9DYXRhcmF0YXMtZGVsLW5pYWdhcmEuanBnXCI7XHJcbmltcG9ydCBydXNobW9yZSBmcm9tIFwiLi4vaW1hZ2VzL21vbnRlLXJ1c2htb3JlLmpwZ1wiO1xyXG5pbXBvcnQgc3BhY2VOZWRkbGUgZnJvbSBcIi4uL2ltYWdlcy9zcGFjZS1uZWRkbGUuanBnXCI7XHJcbmltcG9ydCBlbXBpcmVTdGF0ZSBmcm9tIFwiLi4vaW1hZ2VzL2VtcGlyZS1zdGF0ZS1idWlsZGluZy5qcGdcIjtcclxuXHJcblxyXG5cclxuLy9lbGVtZW50b3MgcXVlIHNlIGVkaXRhbiBlbiBsYSBzZWNjaW9uIGRlIHByb2ZpbGVcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1jb250YWluZXJcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyRWRpdEJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWltYWdlXCIpO1xyXG5cclxuLy9lbGVtZW50b3MgZGUgZWwgcG9wVXAgZGUgZWRpY2nDs24gZGUgcGVyZmlsXHJcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcblxyXG4vL2VsZW1lbnRvcyBkZSBlbCBwb3BVcCBkZSBhZ3JlZ2FyIG51ZXZhcyB0YXJqZXRhcyBkZSBsdWdhclxyXG5leHBvcnQgY29uc3QgYWRkQnV0dG9uUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG4vL3NlbGVjdG9yIGRlIGVsZW1lbnRvIGRvbmRlIHNlIG11ZXN0cmFuIGxhcyB0YXJqZXRhc1xyXG5leHBvcnQgY29uc3QgY2FyZHNMaXN0U2VsZWN0b3IgPSBcIi5lbGVtZW50c1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIkVzdGF0dWEgZGUgbGEgbGliZXJ0YWRcIixcclxuICAgIHVybDogbGliZXJ0eSxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXHJcbiAgICB1cmw6IGdvbGRlbkdhdGUsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkNhdGFyYXRhcyBkZWwgTmnDoWdhcmFcIixcclxuICAgIHVybDogbmlhZ2FyYUZhbGxzLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJNb250ZSBSdXNobW9yZVwiLFxyXG4gICAgdXJsOiBydXNobW9yZSxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiU3BhY2UgTmVkZGxlXCIsXHJcbiAgICB1cmw6IHNwYWNlTmVkZGxlLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJFbXBpcmUgU3RhdGUgQnVpbGRpbmdcIixcclxuICAgIHVybDogZW1waXJlU3RhdGUsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2NvbnRhaW5lclwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnRuLXN1Ym1pdFwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J0bi1zdWJtaXRfaW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxuICBlcnJvclNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXQtZXJyb3JcIlxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VDb25maWcgPSB7XHJcbiAgb3BlblBvcHVwQ2xhc3M6IFwiaW1nLXBvcHVwX29wZW5lZFwiLFxyXG4gIG9wZW5PdmVybGF5Q2xhc3M6IFwib3ZlcmxheV9vcGVuZWRcIixcclxuICBjbG9zZUJ1dHRvblNlbGVjdG9yOiBcIi5pbWctcG9wdXBfX2J0bi1jbG9zZVwiLFxyXG4gIHBvcHVwVWJpY2F0aW9uOiBcIi5pbWctcG9wdXBcIixcclxuICBpbWFnZVByZXZpZXdDbGFzczogXCIuaW1nLXBvcHVwX19wcmV2aWV3XCIsXHJcbiAgaW1hZ2VUaXRsZUNsYXNzOiBcIi5pbWctcG9wdXBfX3RpdGxlXCIsXHJcbiAgcG9wdXBPdmVybGF5OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIiksXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBXaXRoRm9ybUNvbmZpZyA9IHtcclxuICBvcGVuUG9wdXBDbGFzczogXCJwb3B1cF9vcGVuZWRcIixcclxuICBvcGVuT3ZlcmxheUNsYXNzOiBcIm92ZXJsYXlfb3BlbmVkXCIsXHJcbiAgY2xvc2VCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J0bi1jbG9zZVwiLFxyXG4gIHBvcHVwVWJpY2F0aW9uOiBcIi5wb3B1cFwiLFxyXG4gIHBvcHVwT3ZlcmxheTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnRuLXN1Ym1pdFwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwQ29uZmlybWF0aW9uQ29uZmlnID0ge1xyXG4gIG9wZW5Qb3B1cENsYXNzOiBcImNvbmZpcm1hdGlvbi1wb3B1cF9vcGVuZWRcIixcclxuICBvcGVuT3ZlcmxheUNsYXNzOiBcIm92ZXJsYXlfb3BlbmVkXCIsXHJcbiAgY2xvc2VCdXR0b25TZWxlY3RvcjogXCIuY29uZmlybWF0aW9uLXBvcHVwX19idG4tY2xvc2VcIixcclxuICBwb3B1cFViaWNhdGlvbjogXCIuY29uZmlybWF0aW9uLXBvcHVwXCIsXHJcbiAgcG9wdXBPdmVybGF5OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIiksXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmNvbmZpcm1hdGlvbi1wb3B1cF9fYnRuLXN1Ym1pdFwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwQXZhdGFyQ29uZmlnID0ge1xyXG4gIG9wZW5Qb3B1cENsYXNzOiBcImF2YXRhci1wb3B1cF9vcGVuZWRcIixcclxuICBvcGVuT3ZlcmxheUNsYXNzOiBcIm92ZXJsYXlfb3BlbmVkXCIsXHJcbiAgY2xvc2VCdXR0b25TZWxlY3RvcjogXCIuYXZhdGFyLXBvcHVwX19idG4tY2xvc2VcIixcclxuICBwb3B1cFViaWNhdGlvbjogXCIuYXZhdGFyLXBvcHVwXCIsXHJcbiAgcG9wdXBPdmVybGF5OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIiksXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuYXZhdGFyLXBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5hdmF0YXItcG9wdXBfX2J0bi1zdWJtaXRcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhdmF0YXJWYWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIuYXZhdGFyLXBvcHVwX19jb250YWluZXJcIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5hdmF0YXItcG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmF2YXRhci1wb3B1cF9fYnRuLXN1Ym1pdFwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiYXZhdGFyLXBvcHVwX19idG4tc3VibWl0X2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImF2YXRhci1wb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiYXZhdGFyLXBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxuICBlcnJvclNlbGVjdG9yOiBcIi5hdmF0YXItcG9wdXBfX2lucHV0LWVycm9yXCJcclxufTsiLCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKCBwb3B1cCwgY29uZmlnICl7XHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWdcclxuICAgIHRoaXMuX3BvcHVwID0gcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuZm9ybVNlbGVjdG9yKTtcclxuICB9O1xyXG5cclxuICBfc2hvd0Vycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzKSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWlucHV0LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2hpZGVFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0taW5wdXQtZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfTtcclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MpID0+IHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsIGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlRXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzKTtcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgaW5hY3RpdmVCdXR0b25DbGFzcykgPT4ge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBpbnB1dFNlbGVjdG9yLCBzdWJtaXRCdXR0b25TZWxlY3RvciwgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzLCBpbmFjdGl2ZUJ1dHRvbkNsYXNzKSA9PiB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uU2VsZWN0b3IpXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCB0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvciwgdGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yLCB0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzLCB0aGlzLl9jb25maWcuZXJyb3JDbGFzcywgdGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICBjb25zdCBlcnJvckxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmVycm9yU2VsZWN0b3IpKTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB9KTtcclxuICAgIGVycm9yTGlzdC5mb3JFYWNoKChlcnJvckVsZW1lbnQpID0+IHtcclxuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxufTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbmZpcm1hdGlvblBvcHVwIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcG9wdXBUZW1wbGF0ZVNlbGVjdG9yLFxyXG4gICAgcG9wdXBTZWxlY3RvcixcclxuICAgIHtcclxuICAgICAgb3BlblBvcHVwQ2xhc3MsXHJcbiAgICAgIG9wZW5PdmVybGF5Q2xhc3MsXHJcbiAgICAgIGNsb3NlQnV0dG9uU2VsZWN0b3IsXHJcbiAgICAgIHBvcHVwVWJpY2F0aW9uLFxyXG4gICAgICBwb3B1cE92ZXJsYXksXHJcbiAgICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yLFxyXG4gICAgfSxcclxuICAgIGhhbmRsZUZvcm1TdWJtaXRcclxuICApIHtcclxuICAgIHN1cGVyKFxyXG4gICAgICBwb3B1cFRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICAgIHBvcHVwU2VsZWN0b3IsXHJcbiAgICAgIHtcclxuICAgICAgICBvcGVuUG9wdXBDbGFzcyxcclxuICAgICAgICBvcGVuT3ZlcmxheUNsYXNzLFxyXG4gICAgICAgIGNsb3NlQnV0dG9uU2VsZWN0b3IsXHJcbiAgICAgICAgcG9wdXBVYmljYXRpb24sXHJcbiAgICAgICAgcG9wdXBPdmVybGF5LFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKClcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG59IiwiaW1wb3J0IFwiLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm1zIGZyb20gXCIuL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybXMuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIGNhcmRzTGlzdFNlbGVjdG9yLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZUF2YXRhckltYWdlLFxuICBwb3B1cEltYWdlQ29uZmlnLFxuICBwb3B1cFdpdGhGb3JtQ29uZmlnLFxuICBwb3B1cENvbmZpcm1hdGlvbkNvbmZpZyxcbiAgcG9wdXBBdmF0YXJDb25maWcsXG4gIHByb2ZpbGVEZXNjcmlwdGlvblxufSBmcm9tIFwiLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IGFkZEJ1dHRvbkFjdGlvbiwgZWRpdEF2YXRhckFjdGlvbiwgZWRpdEF2YXRhckhvdmVyLCBlZGl0QnV0dG9uQWN0aW9uIH0gZnJvbSBcIi4vdXRpbHMvdXRpbHMuanNcIjtcbmltcG9ydCBDb25maXJtYXRpb25Qb3B1cCBmcm9tIFwiLi9jb21wb25lbnRzL0NvbmZpcm1hdGlvblBvcHVwLmpzXCI7XG5cbi8vRnVuY2nDs24gcGFyYSBjYXJnYXIgbGFzIHRhcmpldGFzIGNyZWFkYXMgZGVzZGUgZWwgYXJyZWdsbyBpbmljaWFsXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGRhdGE6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGluaXRpYWxDYXJkKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgICAgIGluaXRpYWxDYXJkLFxuICAgICAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgICAgIC8qIGluaXRpYWxDYXJkcywgKi9cbiAgICAgICAgKGV2dCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXG4gICAgICAgICAgICBcIiNwb3B1cEltYWdlVGVtcGxhdGVcIixcbiAgICAgICAgICAgIFwiI3BvcHVwX19pbWFnZVwiLFxuICAgICAgICAgICAgcG9wdXBJbWFnZUNvbmZpZyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbmFtZTogZXZ0LnRhcmdldC5hbHQsXG4gICAgICAgICAgICAgIGltYWdlOiBldnQudGFyZ2V0LmN1cnJlbnRTcmMsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBwb3B1cCA9IHBvcHVwSW1hZ2UuZ2VuZXJhdGVQb3B1cCgpO1xuICAgICAgICAgIHBvcHVwSW1hZ2Uub3BlbigpO1xuICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcihwb3B1cEltYWdlQ29uZmlnLnBvcHVwVWJpY2F0aW9uKVxuICAgICAgICAgICAgLnByZXBlbmQocG9wdXApO1xuICAgICAgICB9LFxuICAgICAgICAoZXZ0KSA9PiB7XG4gICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uUG9wdXAgPSBuZXcgQ29uZmlybWF0aW9uUG9wdXAoXG4gICAgICAgICAgICBcIiNwb3B1cENvbmZpcm1hdGlvblRlbXBsYXRlXCIsXG4gICAgICAgICAgICBcIiNwb3B1cF9fY29uZmlybWF0aW9uXCIsXG4gICAgICAgICAgICBwb3B1cENvbmZpcm1hdGlvbkNvbmZpZyxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgZXZ0LnRhcmdldC5jbG9zZXN0KFwiLmVsZW1lbnRzX19jYXJkXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICBsZXQgaW5kaWNlRWxpbWluYXIgPSBpbml0aWFsQ2FyZHMuZmluZEluZGV4KFxuICAgICAgICAgICAgICAgIChlbGVtZW50KSA9PiBlbGVtZW50LmlkID09PSBldnQudGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWRcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaW5pdGlhbENhcmRzLnNwbGljZShpbmRpY2VFbGltaW5hciwgMSk7XG4gICAgICAgICAgICAgIGNvbmZpcm1hdGlvblBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbnN0IHBvcHVwID0gY29uZmlybWF0aW9uUG9wdXAuZ2VuZXJhdGVQb3B1cCgpXG4gICAgICAgICAgY29uZmlybWF0aW9uUG9wdXAub3BlbigpO1xuICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IocG9wdXBDb25maXJtYXRpb25Db25maWcucG9wdXBVYmljYXRpb24pXG4gICAgICAgICAgLnByZXBlbmQocG9wdXApO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaW5pdGlhbENhcmQuaWQgPSBjYXJkLl9pZDtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICAgIGNhcmRzTGlzdC5zZXRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBjYXJkc0xpc3RTZWxlY3RvclxuKTtcblxuLy9yZW5kZXJpemFyIGxhcyA2IHRhcmpldGFzIGluaWNpYWxlc1xuY2FyZHNMaXN0LnJlbmRlckl0ZW1zKCk7XG5cbi8vY3JlYSBpbnN0YW5jaWEgZGUgbGEgY2xhc2UgVXNlckluZm9cbmV4cG9ydCBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uKTtcblxuLy9jcmVhIGluc3RhbmNpYSBkZSBsYSBjbGFzZSBQb3B1cFdpdGhGb3JtcyBwYXJhIGVsIHBvcHVwIGRlbCBwZXJmaWxcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybXMoXG4gIFwiI3BvcHVwUHJvZmlsZVRlbXBsYXRlXCIsXG4gIFwiI3BvcHVwX19wcm9maWxlXCIsXG4gIHBvcHVwV2l0aEZvcm1Db25maWcsXG4gIChmb3JtRGF0YSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGZvcm1EYXRhKTtcbiAgICBwb3B1cFByb2ZpbGUuY2xvc2UoKTtcbiAgfVxuKTtcblxuLy9jcmVhIGluc3RhbmNpYSBkZSBsYSBjbGFzZSBQb3B1cFdpdGhGb3JtcyBwYXJhIGVsIHBvcHVwIGRlIGFncmVnYXIgbHVnYXJcbmV4cG9ydCBjb25zdCBwb3B1cFBsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm1zKFxuICBcIiNwb3B1cFBsYWNlVGVtcGxhdGVcIixcbiAgXCIjcG9wdXBfX3BsYWNlXCIsXG4gIHBvcHVwV2l0aEZvcm1Db25maWcsXG4gIChmb3JtRGF0YSkgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgIGZvcm1EYXRhLFxuICAgICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgICAgLyogaW5pdGlhbENhcmRzLCAqL1xuICAgICAgKGV2dCkgPT4ge1xuICAgICAgICBjb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFxuICAgICAgICAgIFwiI3BvcHVwSW1hZ2VUZW1wbGF0ZVwiLFxuICAgICAgICAgIFwiI3BvcHVwX19pbWFnZVwiLFxuICAgICAgICAgIHBvcHVwSW1hZ2VDb25maWcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogZXZ0LnRhcmdldC5hbHQsXG4gICAgICAgICAgICBpbWFnZTogZXZ0LnRhcmdldC5jdXJyZW50U3JjLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcG9wdXAgPSBwb3B1cEltYWdlLmdlbmVyYXRlUG9wdXAoKTtcbiAgICAgICAgcG9wdXBJbWFnZS5vcGVuKCk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBJbWFnZUNvbmZpZy5wb3B1cFViaWNhdGlvbikucHJlcGVuZChwb3B1cCk7XG4gICAgICB9LFxuICAgICAgKGV2dCkgPT4ge1xuICAgICAgICBjb25zdCBjb25maXJtYXRpb25Qb3B1cCA9IG5ldyBDb25maXJtYXRpb25Qb3B1cChcbiAgICAgICAgICBcIiNwb3B1cENvbmZpcm1hdGlvblRlbXBsYXRlXCIsXG4gICAgICAgICAgXCIjcG9wdXBfX2NvbmZpcm1hdGlvblwiLFxuICAgICAgICAgIHBvcHVwQ29uZmlybWF0aW9uQ29uZmlnLFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIGV2dC50YXJnZXQuY2xvc2VzdChcIi5lbGVtZW50c19fY2FyZFwiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIGxldCBpbmRpY2VFbGltaW5hciA9IGluaXRpYWxDYXJkcy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgIChlbGVtZW50KSA9PiBlbGVtZW50LmlkID09PSBldnQudGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpbml0aWFsQ2FyZHMuc3BsaWNlKGluZGljZUVsaW1pbmFyLCAxKTtcbiAgICAgICAgICAgIGNvbmZpcm1hdGlvblBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGNvbnN0IHBvcHVwID0gY29uZmlybWF0aW9uUG9wdXAuZ2VuZXJhdGVQb3B1cCgpO1xuICAgICAgICBjb25maXJtYXRpb25Qb3B1cC5vcGVuKCk7XG4gICAgICAgIGRvY3VtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKHBvcHVwQ29uZmlybWF0aW9uQ29uZmlnLnBvcHVwVWJpY2F0aW9uKVxuICAgICAgICAucHJlcGVuZChwb3B1cCk7XG4gICAgICB9XG4gICAgKTtcbiAgICBmb3JtRGF0YS5pZCA9IGNhcmQuX2lkO1xuICAgIGluaXRpYWxDYXJkcy5wdXNoKGZvcm1EYXRhKTtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gICAgY2FyZHNMaXN0LnNldEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIHBvcHVwUGxhY2UuY2xvc2UoKTtcbiAgfVxuKTtcblxuLy9jcmVhIGluc3RhbmNpYSBkZSBsYSBjbGFzZSBQb3B1cFdpdGhGb3JtcyBwYXJhIGVsIHBvcHVwIGRlIGVkaXRhciBpbWFnZW4gZGUgQXZhdGFyXG5leHBvcnQgY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybXMgKFxuICBcIiNwb3B1cEF2YXRhclRlbXBsYXRlXCIsXG4gIFwiI3BvcHVwX19hdmF0YXJcIixcbiAgcG9wdXBBdmF0YXJDb25maWcsXG4gIChmb3JtRGF0YSkgPT4ge1xuICAgIHByb2ZpbGVBdmF0YXJJbWFnZS5zcmMgPSBmb3JtRGF0YS5hdmF0YXI7XG4gICAgcG9wdXBBdmF0YXIuY2xvc2UoKTtcbiAgfVxuKTtcblxuLy9lamVjdWNpw7NuIGRlIGZ1bmNpw7NuIHF1ZSBhYnJlIGxhIHZlbnRhbmEgcG9wdXAgUHJvZmlsZSBhbCBkYXIgY2xpY2sgZW4gZWwgaWNvbm8gZGVsIGzDoXBpeiAoZWRpdGFyKVxuZWRpdEJ1dHRvbkFjdGlvbigpO1xuXG4vL2VqZWN1Y2nDs24gZGUgZnVuY2nDs24gcXVlIGFicmUgbGEgdmVudGFuYSBwb3B1cCBQbGFjZSBhbCBkYXIgY2xpY2sgZW4gZWwgaWNvbm8gZGVsICsgKGFncmVnYXIpXG5hZGRCdXR0b25BY3Rpb24oKTtcblxuLy9lamV1Y2nDs24gZGUgZnVuY2nDs24gcXVlIG11ZXN0cmEgZWwgYm90w7NuIGRlIGVkaXRhciBlbCBhdmF0YXJcbmVkaXRBdmF0YXJIb3ZlcigpO1xuXG4vL2VqZXVjacOzbiBkZSBmdW5jacOzbiBxdWUgYWJyZSBsYSB2ZW50YW5hIHBvcHVwIGRlIGVkaXRhciBBdmF0YXIgYWwgZGFyIGNsaWNrIGVuIGxhIGltYWfDqW4gZGUgcGVyZmlsXG5lZGl0QXZhdGFyQWN0aW9uKCk7IiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgcG9wdXBBdmF0YXIsIHBvcHVwUGxhY2UsIHBvcHVwUHJvZmlsZSwgdXNlckluZm8gfSBmcm9tIFwiLi4vaW5kZXguanNcIjtcbmltcG9ydCB7XG4gIGFkZEJ1dHRvblBsYWNlLFxuICBlZGl0QnV0dG9uUHJvZmlsZSxcbiAgcHJvZmlsZUF2YXRhcixcbiAgcHJvZmlsZUF2YXRhckVkaXRCdXR0b24sXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGF2YXRhclZhbGlkYXRpb25Db25maWcsXG59IGZyb20gXCIuL2NvbnN0YW50cy5qc1wiO1xuLy9mdW5jacOzbiBxdWUgYWJyZSBsYSB2ZW50YW5hIHBvcHVwIFByb2ZpbGUgYWwgZGFyIGNsaWNrIGVuIGVsIGljb25vIGRlbCBsw6FwaXogKGVkaXRhcilcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uQWN0aW9uID0gKCkgPT4ge1xuICBlZGl0QnV0dG9uUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHBvcHVwID0gcG9wdXBQcm9maWxlLmdlbmVyYXRlUG9wdXAoKTtcbiAgICBwb3B1cFByb2ZpbGUub3BlbigpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIikucHJlcGVuZChwb3B1cCk7XG4gICAgdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBuZXcgRm9ybVZhbGlkYXRvcihwb3B1cCwgdmFsaWRhdGlvbkNvbmZpZykuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIHBvcHVwUHJvZmlsZS5kaXNhYmxlQ29uZmlybUJ1dHRvbigpO1xuICB9KTtcbn07XG5cbi8vZnVuY2nDs24gcXVlIGFicmUgbGEgdmVudGFuYSBwb3B1cCBQbGFjZSBhbCBkYXIgY2xpY2sgZW4gZWwgaWNvbm8gZGVsICsgKGFncmVnYXIpXG5leHBvcnQgY29uc3QgYWRkQnV0dG9uQWN0aW9uID0gKCkgPT4ge1xuICBhZGRCdXR0b25QbGFjZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHBvcHVwID0gcG9wdXBQbGFjZS5nZW5lcmF0ZVBvcHVwKCk7XG4gICAgcG9wdXBQbGFjZS5vcGVuKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cFwiKS5wcmVwZW5kKHBvcHVwKTtcbiAgICBuZXcgRm9ybVZhbGlkYXRvcihwb3B1cCwgdmFsaWRhdGlvbkNvbmZpZykuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbi8vZnVuY2nDs24gcXVlIG11ZXN0cmEgZWwgYm90w7NuIGRlIGVkaXRhciBlbCBhdmF0YXJcbmV4cG9ydCBjb25zdCBlZGl0QXZhdGFySG92ZXIgPSAoKSA9PiB7XG4gIHByb2ZpbGVBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCAoKSA9PiB7XG4gICAgcHJvZmlsZUF2YXRhckVkaXRCdXR0b24uY2xhc3NMaXN0LmFkZChcInByb2ZpbGVfX2F2YXRhci1lZGl0X3Nob3duXCIpO1xuICB9KTtcbiAgcHJvZmlsZUF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT4ge1xuICAgIHByb2ZpbGVBdmF0YXJFZGl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9maWxlX19hdmF0YXItZWRpdF9zaG93blwiKTtcbiAgfSk7XG59O1xuXG4vL2Z1bmNpw7NuIHF1ZSBhYnJlIGxhIHZlbnRhbmEgcG9wdXAgZGUgZWRpdGFyIEF2YXRhciBhbCBkYXIgY2xpY2sgZW4gbGEgaW1hZ8OpbiBkZSBwZXJmaWxcbmV4cG9ydCBjb25zdCBlZGl0QXZhdGFyQWN0aW9uID0gKCkgPT4ge1xuICBwcm9maWxlQXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHBvcHVwID0gcG9wdXBBdmF0YXIuZ2VuZXJhdGVQb3B1cCgpO1xuICAgIHBvcHVwQXZhdGFyLm9wZW4oKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmF2YXRhci1wb3B1cFwiKS5wcmVwZW5kKHBvcHVwKTtcbiAgICBuZXcgRm9ybVZhbGlkYXRvcihwb3B1cCwgYXZhdGFyVmFsaWRhdGlvbkNvbmZpZykuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9pZCIsIl9jcmVhdGVVbmlxdWVJZCIsIl9uYW1lIiwibmFtZSIsIl91cmwiLCJ1cmwiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsInZhbHVlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiRGF0ZSIsImdldFRpbWUiLCJ0b1N0cmluZyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfdGhpcyIsIl9wb3B1cEltYWdlIiwiX3BvcHVwT3ZlcmxheSIsIl9lbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwidG9nZ2xlIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwic3JjIiwiYWx0Iiwic2V0QXR0cmlidXRlIiwidGV4dENvbnRlbnQiLCJQb3B1cCIsInBvcHVwVGVtcGxhdGVTZWxlY3RvciIsInBvcHVwU2VsZWN0b3IiLCJfcmVmIiwib3BlblBvcHVwQ2xhc3MiLCJvcGVuT3ZlcmxheUNsYXNzIiwiY2xvc2VCdXR0b25TZWxlY3RvciIsInBvcHVwVWJpY2F0aW9uIiwicG9wdXBPdmVybGF5IiwiX3BvcHVwVGVtcGxhdGVTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX29wZW5Qb3B1cENsYXNzIiwiX292ZXJsYXlPcGVuQ2xhc3MiLCJfY2xvc2VCdXR0b25TZWxlY3RvciIsIl9wb3B1cFViaWNhdGlvbiIsIl9wb3B1cCIsImFkZCIsInJlbW92ZSIsImNsb3Nlc3QiLCJjbG9zZSIsIlBvcHVwV2l0aEZvcm1zIiwiX1BvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9jYWxsU3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luaGVyaXRzIiwiX3RoaXMyIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybVZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsIl90aGlzMyIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2VQcmV2aWV3Q2xhc3MiLCJpbWFnZVRpdGxlQ2xhc3MiLCJfaW1hZ2VQcmV2aWV3Q2xhc3MiLCJfaW1hZ2VUaXRsZUNsYXNzIiwiX2ltYWdlIiwiaW1hZ2UiLCJpbWFnZVZhbHVlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJVc2VySW5mbyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbiIsImZvcm1EYXRhIiwiYWJvdXQiLCJwcm9maWxlQXZhdGFyIiwicHJvZmlsZUF2YXRhckVkaXRCdXR0b24iLCJwcm9maWxlQXZhdGFySW1hZ2UiLCJlZGl0QnV0dG9uUHJvZmlsZSIsImFkZEJ1dHRvblBsYWNlIiwiaW5pdGlhbENhcmRzIiwibGliZXJ0eSIsImdvbGRlbkdhdGUiLCJuaWFnYXJhRmFsbHMiLCJydXNobW9yZSIsInNwYWNlTmVkZGxlIiwiZW1waXJlU3RhdGUiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvclNlbGVjdG9yIiwicG9wdXBJbWFnZUNvbmZpZyIsInBvcHVwV2l0aEZvcm1Db25maWciLCJwb3B1cENvbmZpcm1hdGlvbkNvbmZpZyIsInBvcHVwQXZhdGFyQ29uZmlnIiwiYXZhdGFyVmFsaWRhdGlvbkNvbmZpZyIsIkZvcm1WYWxpZGF0b3IiLCJfY3JlYXRlQ2xhc3MiLCJwb3B1cCIsImNvbmZpZyIsIl9kZWZpbmVQcm9wZXJ0eSIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVFcnJvciIsIl9zaG93RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0TGlzdCIsInNvbWUiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsInJlbW92ZUF0dHJpYnV0ZSIsIkFycmF5IiwiZnJvbSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfY29uZmlnIiwiZXJyb3JMaXN0IiwiQ29uZmlybWF0aW9uUG9wdXAiLCJjYXJkc0xpc3QiLCJpbml0aWFsQ2FyZCIsImNhcmQiLCJwb3B1cEltYWdlIiwiY3VycmVudFNyYyIsImdlbmVyYXRlUG9wdXAiLCJvcGVuIiwiY29uZmlybWF0aW9uUG9wdXAiLCJpbmRpY2VFbGltaW5hciIsImZpbmRJbmRleCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJzcGxpY2UiLCJjYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsInNldEl0ZW0iLCJyZW5kZXJJdGVtcyIsInVzZXJJbmZvIiwicG9wdXBQcm9maWxlIiwic2V0VXNlckluZm8iLCJwb3B1cFBsYWNlIiwicHVzaCIsInBvcHVwQXZhdGFyIiwiYXZhdGFyIiwiZ2V0VXNlckluZm8iLCJlbmFibGVWYWxpZGF0aW9uIiwiZGlzYWJsZUNvbmZpcm1CdXR0b24iXSwic291cmNlUm9vdCI6IiJ9