!function(){"use strict";var e={d:function(t,o){for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}function r(e){var o=function(e,o){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(o)?o:o+""}e.d({},{ob:function(){return be},cp:function(){return ve},eD:function(){return me},eF:function(){return ye}});var n=function(){return e=function e(t,o,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t._id,this._name=t.name,this._link=t.link,this._cardSelector=o,this._handleCardClick=r,this._handleDeleteClick=n},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".elements__card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._popupImage=document.querySelector("#popup__image"),this._popupOverlay=document.querySelector(".overlay"),this._element.addEventListener("click",(function(t){t.target.classList.contains("elements__card-btn-hearth")&&t.target.classList.toggle("elements__card-btn-hearth_active"),t.target.classList.contains("elements__card-photo-imagen")&&e._handleCardClick(t),t.target.classList.contains("elements__card-btn-trash")&&e._handleDeleteClick(t)}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".elements__card-photo-imagen").src=this._link,this._element.querySelector(".elements__card-photo-imagen").alt=this._name,this._element.querySelector(".elements__card-photo-imagen").setAttribute("id",this._id),this._element.querySelector(".elements__card-title").textContent=this._name,this._element}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var c=function(){return e=function e(t,o,r){var n=r.openPopupClass,i=r.openOverlayClass,u=r.closeButtonSelector,a=r.popupUbication,c=r.popupOverlay;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupTemplateSelector=t,this._popupSelector=o,this._openPopupClass=n,this._overlayOpenClass=i,this._closeButtonSelector=u,this._popupUbication=a,this._popupOverlay=c},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._popupTemplateSelector).content.querySelector(this._popupSelector).cloneNode(!0)}},{key:"generatePopup",value:function(){return this._popup=this._getTemplate(),this._setEventListeners(),this._popup}},{key:"open",value:function(){document.querySelector(this._popupUbication).classList.add(this._openPopupClass),this._popupOverlay.classList.add(this._overlayOpenClass)}},{key:"close",value:function(){document.querySelector(this._popupUbication).classList.remove(this._openPopupClass),this._popupOverlay.classList.remove(this._overlayOpenClass),this._popup.closest(this._popupSelector).remove()}},{key:"_setEventListeners",value:function(){var e=this;this._popup.querySelector(this._closeButtonSelector).addEventListener("click",(function(){return e.close()})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()})),this._popupOverlay.addEventListener("click",(function(){e.close()}))}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function l(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function f(e,t,o){return t=v(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,o||[],v(e).constructor):t.apply(e,o))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(arguments.length<3?e:o):n.value}},m.apply(null,arguments)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}var _=function(e){function t(e,o,r,n){var i,u=r.openPopupClass,a=r.openOverlayClass,c=r.closeButtonSelector,p=r.popupUbication,l=r.popupOverlay,s=r.inputSelector,y=r.submitButtonSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=f(this,t,[e,o,{openPopupClass:u,openOverlayClass:a,closeButtonSelector:c,popupUbication:p,popupOverlay:l}]))._handleFormSubmit=n,i._inputSelector=s,i._submitButtonSelector=y,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),o=t,(r=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popup.querySelectorAll(this._inputSelector),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"disableConfirmButton",value:function(){document.querySelector(this._popupSelector).querySelector(this._submitButtonSelector).classList.add("popup__btn-submit_inactive"),document.querySelector(this._popupSelector).querySelector(this._submitButtonSelector).setAttribute("disabled",!0)}},{key:"_setEventListeners",value:function(){var e=this;m(v(t.prototype),"_setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}}])&&l(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}(c);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}function g(e,t,o){return t=P(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,o||[],P(e).constructor):t.apply(e,o))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(arguments.length<3?e:o):n.value}},O.apply(null,arguments)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}var j=function(e){function t(e,o,r,n){var i,u=r.openPopupClass,a=r.openOverlayClass,c=r.closeButtonSelector,p=r.popupUbication,l=r.imagePreviewClass,s=r.imageTitleClass,f=r.popupOverlay;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=g(this,t,[e,o,{openPopupClass:u,openOverlayClass:a,closeButtonSelector:c,popupUbication:p,popupOverlay:f}]))._imagePreviewClass=l,i._imageTitleClass=s,i._name=n.name,i._image=n.image,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),o=t,(r=[{key:"open",value:function(){O(P(t.prototype),"open",this).call(this);var e=this._popup.querySelector(this._imagePreviewClass);e.src=this._image,e.alt=this._name,this._popup.querySelector(this._imageTitleClass).textContent=this._name}}])&&h(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}(c);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function k(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function q(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}var L=function(){return e=function e(t,o){var r=t.data,n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=n,this._container=document.querySelector(o)},(t=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"setItem",value:function(e){this._container.prepend(e)}}])&&k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function B(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U(r.key),r)}}function U(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}var I=function(){return e=function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=t,this._profileDescription=o},(t=[{key:"setUserInfo",value:function(e){this._profileName.textContent=e.name,this._profileDescription.textContent=e.about}},{key:"getUserInfo",value:function(){document.querySelector("#name-profile").value=this._profileName.textContent,document.querySelector("#about-profile").value=this._profileDescription.textContent}}])&&B(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),R=document.querySelector(".profile__name"),A=document.querySelector(".profile__description"),D=document.querySelector(".profile__avatar-container"),V=document.querySelector("#avatarEditButton"),x=document.querySelector(".profile__avatar-image"),N=document.querySelector(".profile__edit-button"),F=document.querySelector(".profile__add-button"),G={formSelector:".popup__container",inputSelector:".popup__input",submitButtonSelector:".popup__btn-submit",inactiveButtonClass:"popup__btn-submit_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active",errorSelector:".popup__input-error"},z={openPopupClass:"img-popup_opened",openOverlayClass:"overlay_opened",closeButtonSelector:".img-popup__btn-close",popupUbication:".img-popup",imagePreviewClass:".img-popup__preview",imageTitleClass:".img-popup__title",popupOverlay:document.querySelector(".overlay")},H={openPopupClass:"popup_opened",openOverlayClass:"overlay_opened",closeButtonSelector:".popup__btn-close",popupUbication:".popup",popupOverlay:document.querySelector(".overlay"),inputSelector:".popup__input",submitButtonSelector:".popup__btn-submit"},J={openPopupClass:"confirmation-popup_opened",openOverlayClass:"overlay_opened",closeButtonSelector:".confirmation-popup__btn-close",popupUbication:".confirmation-popup",popupOverlay:document.querySelector(".overlay"),submitButtonSelector:".confirmation-popup__btn-submit"},M={openPopupClass:"avatar-popup_opened",openOverlayClass:"overlay_opened",closeButtonSelector:".avatar-popup__btn-close",popupUbication:".avatar-popup",popupOverlay:document.querySelector(".overlay"),inputSelector:".avatar-popup__input",submitButtonSelector:".avatar-popup__btn-submit"},K={formSelector:".avatar-popup__container",inputSelector:".avatar-popup__input",submitButtonSelector:".avatar-popup__btn-submit",inactiveButtonClass:"avatar-popup__btn-submit_inactive",inputErrorClass:"avatar-popup__input_type_error",errorClass:"avatar-popup__input-error_active",errorSelector:".avatar-popup__input-error"};function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function W(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z(r.key),r)}}function X(e,t,o){return t&&W(e.prototype,t),o&&W(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y(e,t,o){return(t=Z(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Z(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}var $=X((function e(t,o){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Y(this,"_showError",(function(e,t,o,r,n){var i=e.querySelector(".".concat(t.id,"-input-error"));t.classList.add(r),i.textContent=o,i.classList.add(n)})),Y(this,"_hideError",(function(e,t,o,r){var n=e.querySelector(".".concat(t.id,"-input-error"));t.classList.remove(o),n.classList.remove(r),n.textContent=""})),Y(this,"_checkInputValidity",(function(e,t,o,n){t.validity.valid?r._hideError(e,t,o,n):r._showError(e,t,t.validationMessage,o,n)})),Y(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),Y(this,"_toggleButtonState",(function(e,t,o){r._hasInvalidInput(e)?(t.classList.add(o),t.setAttribute("disabled",!0)):(t.classList.remove(o),t.removeAttribute("disabled"))})),Y(this,"_setEventListeners",(function(e,t,o,n,i,u){var a=Array.from(e.querySelectorAll(t)),c=e.querySelector(o);r._toggleButtonState(a,c,u),a.forEach((function(t){t.addEventListener("input",(function(){r._checkInputValidity(e,t,n,i),r._toggleButtonState(a,c,u)}))}))})),Y(this,"enableValidation",(function(){Array.from(document.querySelectorAll(r._config.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),r._setEventListeners(e,r._config.inputSelector,r._config.submitButtonSelector,r._config.inputErrorClass,r._config.errorClass,r._config.inactiveButtonClass)}))})),Y(this,"resetValidation",(function(){var e=Array.from(document.querySelectorAll(r._config.inputSelector)),t=Array.from(document.querySelectorAll(r._config.errorSelector));e.forEach((function(e){e.classList.remove(r._config.inputErrorClass)})),t.forEach((function(e){e.classList.remove(r._config.errorClass)}))})),this._config=o,this._popup=t.querySelector(this._config.formSelector)}));function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oe(r.key),r)}}function oe(e){var t=function(e,t){if("object"!=ee(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ee(t)?t:t+""}function re(e,t,o){return t=ue(t),function(e,t){if(t&&("object"==ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ne()?Reflect.construct(t,o||[],ue(e).constructor):t.apply(e,o))}function ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ne=function(){return!!e})()}function ie(){return ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ue(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(arguments.length<3?e:o):n.value}},ie.apply(null,arguments)}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ae(e,t)}var ce=function(e){function t(e,o,r,n){var i,u=r.openPopupClass,a=r.openOverlayClass,c=r.closeButtonSelector,p=r.popupUbication,l=r.popupOverlay,s=r.submitButtonSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=re(this,t,[e,o,{openPopupClass:u,openOverlayClass:a,closeButtonSelector:c,popupUbication:p,popupOverlay:l}]))._handleFormSubmit=n,i._submitButtonSelector=s,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}(t,e),o=t,(r=[{key:"_setEventListeners",value:function(){var e=this;ie(ue(t.prototype),"_setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit()}))}}])&&te(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}(c);function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function le(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,se(r.key),r)}}function se(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pe(t)?t:t+""}var fe=new(function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers||null},(t=[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"cards"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"users/me"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}}])&&le(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())({baseUrl:"https://around.nomoreparties.co/v1/web_es_11/",headers:{authorization:"04d1875f-c579-4568-96e2-fbf8888c1f19","Content-Type":"application/json"}}),ye=new I(R,A),me=new _("#popupProfileTemplate","#popup__profile",H,(function(e){fe.setUserInfo(e).then((function(e){ye.setUserInfo(e)})).then(me.close())})),ve=new _("#popupPlaceTemplate","#popup__place",H,(function(e){var t=new n(e,"#card-template",(function(e){var t=new j("#popupImageTemplate","#popup__image",z,{name:e.target.alt,image:e.target.currentSrc}),o=t.generatePopup();t.open(),document.querySelector(z.popupUbication).prepend(o)}),(function(e){var t=new ce("#popupConfirmationTemplate","#popup__confirmation",J,(function(){e.target.closest(".elements__card").remove(),t.close()})),o=t.generatePopup();t.open(),document.querySelector(J.popupUbication).prepend(o)})).generateCard();cardsList.setItem(t),ve.close()})),be=new _("#popupAvatarTemplate","#popup__avatar",M,(function(e){x.src=e.avatar,be.close()}));fe.getInitialCards().then((function(e){var t=new L({data:e,renderer:function(e){var o=new n(e,"#card-template",(function(e){var t=new j("#popupImageTemplate","#popup__image",z,{name:e.target.alt,image:e.target.currentSrc}),o=t.generatePopup();t.open(),document.querySelector(z.popupUbication).prepend(o)}),(function(e){var t=new ce("#popupConfirmationTemplate","#popup__confirmation",J,(function(){e.target.closest(".elements__card").remove(),t.close()})),o=t.generatePopup();t.open(),document.querySelector(J.popupUbication).prepend(o)})).generateCard();t.setItem(o)}},".elements");t.renderItems()})),fe.getUserInfo().then((function(e){ye.setUserInfo(e)})),N.addEventListener("click",(function(){var e=me.generatePopup();me.open(),document.querySelector(".popup").prepend(e),ye.getUserInfo(),new $(e,G).enableValidation(),me.disableConfirmButton()})),F.addEventListener("click",(function(){var e=ve.generatePopup();ve.open(),document.querySelector(".popup").prepend(e),new $(e,G).enableValidation()})),D.addEventListener("mouseover",(function(){V.classList.add("profile__avatar-edit_shown")})),D.addEventListener("mouseout",(function(){V.classList.remove("profile__avatar-edit_shown")})),V.addEventListener("click",(function(){var e=be.generatePopup();be.open(),document.querySelector(".avatar-popup").prepend(e),new $(e,K).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dkUsZ0JBQ3RDa0QsUUFBUTBCLEVBQ1gsSUFHdUI0RCxlQUN6QkMsRUFBVUMsUUFBUVIsRUFDcEIsR0o5STJCLGFJb0ovQk8sRUFBVU0sYUFDWixJQUdBekMsR0FBWTBDLGNBQWNqQyxNQUFLLFNBQUF6SixHQUM3QndLLEdBQVNFLFlBQVkxSyxFQUN2QixJQ25LRXVHLEVBQWtCaEYsaUJBQWlCLFNBQVMsV0FDMUMsSUFBTStGLEVBQVFtRCxHQUFhTSxnQkFDM0JOLEdBQWFPLE9BQ2JqSyxTQUFTQyxjQUFjLFVBQVU0RSxRQUFRMEIsR0FDekNrRCxHQUFTa0IsY0FDVCxJQUFJdEUsRUFBY0UsRUFBT2IsR0FBa0JrRixtQkFDM0NsQixHQUFhbUIsc0JBQ2YsSUFLQXBGLEVBQWVqRixpQkFBaUIsU0FBUyxXQUN2QyxJQUFNK0YsRUFBUXFELEdBQVdJLGdCQUN6QkosR0FBV0ssT0FDWGpLLFNBQVNDLGNBQWMsVUFBVTRFLFFBQVEwQixHQUN6QyxJQUFJRixFQUFjRSxFQUFPYixHQUFrQmtGLGtCQUM3QyxJQUtBdkYsRUFBYzdFLGlCQUFpQixhQUFhLFdBQzFDOEUsRUFBd0IzRSxVQUFVeUIsSUFBSSw2QkFDeEMsSUFDQWlELEVBQWM3RSxpQkFBaUIsWUFBWSxXQUN6QzhFLEVBQXdCM0UsVUFBVTBCLE9BQU8sNkJBQzNDLElBS0FpRCxFQUF3QjlFLGlCQUFpQixTQUFTLFdBQ2hELElBQU0rRixFQUFRK0QsR0FBWU4sZ0JBQzFCTSxHQUFZTCxPQUNaakssU0FBU0MsY0FBYyxpQkFBaUI0RSxRQUFRMEIsR0FDaEQsSUFBSUYsRUFBY0UsRUFBT0gsR0FBd0J3RSxrQkFDbkQsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybXMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ29uZmlybWF0aW9uUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvciggZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrKSB7XG4gICAvLyB0aGlzLl9pZCA9IHRoaXMuX2NyZWF0ZVVuaXF1ZUlkKClcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgfTtcblxuIC8qICBfY3JlYXRlVW5pcXVlSWQgKCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAqIDMpLnRvU3RyaW5nKCk7XG4gIH07ICovXG5cbiAgLy9mdW5jacOzbiBwYXJhIGNsb25hciBsYSBwbGFudGlsbGFcbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IG5ld0NhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkXCIpLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gbmV3Q2FyZDtcbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXBfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3BvcHVwT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcblxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAvL2V2ZW50byBwYXJhIGZ1bmNpb25hbGlkYWQgZGVsIGJvdG9uIGRlIGxpa2VcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImVsZW1lbnRzX19jYXJkLWJ0bi1oZWFydGhcIikpIHtcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudHNfX2NhcmQtYnRuLWhlYXJ0aF9hY3RpdmVcIik7XG4gICAgICB9O1xuICAgICAgLy9ldmVudG8gcGFyYSBtb3N0cmFyIGVsIHBvcFVwIGRlIGxhIHZpc3VhbGl6YWNpw7NuIGRlIGxhIGltYWdlblxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZWxlbWVudHNfX2NhcmQtcGhvdG8taW1hZ2VuXCIpKXtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKGV2dCk7XG4gICAgICB9O1xuICAgICAgLy9ldmVudG8gcGFyYSBmdW5jaW9uYWxpZGFkIGRlbCBib3RvbiBkZSBlbGltaW5hclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZWxlbWVudHNfX2NhcmQtYnRuLXRyYXNoXCIpKXtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2soZXZ0KVxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICAvL2Z1bmNpw7NuIHBhcmEgY3JlYXIgbGEgdGFyamV0YVxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmQtcGhvdG8taW1hZ2VuXCIpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkLXBob3RvLWltYWdlblwiKS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1waG90by1pbWFnZW5cIikuc2V0QXR0cmlidXRlKFwiaWRcIiwgdGhpcy5faWQgKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmQtdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH07XG59O1xuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHBvcHVwVGVtcGxhdGVTZWxlY3RvcixcclxuICAgIHBvcHVwU2VsZWN0b3IsXHJcbiAgICB7XHJcbiAgICAgIG9wZW5Qb3B1cENsYXNzLFxyXG4gICAgICBvcGVuT3ZlcmxheUNsYXNzLFxyXG4gICAgICBjbG9zZUJ1dHRvblNlbGVjdG9yLFxyXG4gICAgICBwb3B1cFViaWNhdGlvbixcclxuICAgICAgcG9wdXBPdmVybGF5XHJcbiAgICB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cFRlbXBsYXRlU2VsZWN0b3IgPSBwb3B1cFRlbXBsYXRlU2VsZWN0b3JcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yXHJcbiAgICB0aGlzLl9vcGVuUG9wdXBDbGFzcyA9IG9wZW5Qb3B1cENsYXNzO1xyXG4gICAgdGhpcy5fb3ZlcmxheU9wZW5DbGFzcyA9IG9wZW5PdmVybGF5Q2xhc3M7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvblNlbGVjdG9yID0gY2xvc2VCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX3BvcHVwVWJpY2F0aW9uID0gcG9wdXBVYmljYXRpb247XHJcbiAgICB0aGlzLl9wb3B1cE92ZXJsYXkgPSBwb3B1cE92ZXJsYXk7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBuZXdQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXBUZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXBTZWxlY3RvcikuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIG5ld1BvcHVwO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVQb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9wdXA7XHJcbiAgfTtcclxuXHJcbiAgb3BlbigpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXBVYmljYXRpb24pLmNsYXNzTGlzdC5hZGQodGhpcy5fb3BlblBvcHVwQ2xhc3MpO1xyXG4gICAgdGhpcy5fcG9wdXBPdmVybGF5LmNsYXNzTGlzdC5hZGQodGhpcy5fb3ZlcmxheU9wZW5DbGFzcyk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXBVYmljYXRpb24pLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3BlblBvcHVwQ2xhc3MpO1xyXG4gICAgdGhpcy5fcG9wdXBPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3ZlcmxheU9wZW5DbGFzcyk7XHJcbiAgICB0aGlzLl9wb3B1cC5jbG9zZXN0KHRoaXMuX3BvcHVwU2VsZWN0b3IpLnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9jbG9zZUJ1dHRvblNlbGVjdG9yKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cE92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybXMgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHBvcHVwVGVtcGxhdGVTZWxlY3RvcixcbiAgICBwb3B1cFNlbGVjdG9yLFxuICAgIHtcbiAgICAgIG9wZW5Qb3B1cENsYXNzLFxuICAgICAgb3Blbk92ZXJsYXlDbGFzcyxcbiAgICAgIGNsb3NlQnV0dG9uU2VsZWN0b3IsXG4gICAgICBwb3B1cFViaWNhdGlvbixcbiAgICAgIHBvcHVwT3ZlcmxheSxcbiAgICAgIGlucHV0U2VsZWN0b3IsXG4gICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcixcbiAgICB9LFxuICAgIGhhbmRsZUZvcm1TdWJtaXRcbiAgKSB7XG4gICAgc3VwZXIoXG4gICAgICBwb3B1cFRlbXBsYXRlU2VsZWN0b3IsXG4gICAgICBwb3B1cFNlbGVjdG9yLFxuICAgICAge1xuICAgICAgICBvcGVuUG9wdXBDbGFzcyxcbiAgICAgICAgb3Blbk92ZXJsYXlDbGFzcyxcbiAgICAgICAgY2xvc2VCdXR0b25TZWxlY3RvcixcbiAgICAgICAgcG9wdXBVYmljYXRpb24sXG4gICAgICAgIHBvcHVwT3ZlcmxheSxcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBpbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgZGlzYWJsZUNvbmZpcm1CdXR0b24oKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFNlbGVjdG9yKS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKS5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX2J0bi1zdWJtaXRfaW5hY3RpdmVcIik7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFNlbGVjdG9yKS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pXG4gIH1cbn1cblxuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcG9wdXBUZW1wbGF0ZVNlbGVjdG9yLFxyXG4gICAgcG9wdXBTZWxlY3RvcixcclxuICAgIHtcclxuICAgICAgb3BlblBvcHVwQ2xhc3MsXHJcbiAgICAgIG9wZW5PdmVybGF5Q2xhc3MsXHJcbiAgICAgIGNsb3NlQnV0dG9uU2VsZWN0b3IsXHJcbiAgICAgIHBvcHVwVWJpY2F0aW9uLFxyXG4gICAgICBpbWFnZVByZXZpZXdDbGFzcyxcclxuICAgICAgaW1hZ2VUaXRsZUNsYXNzLFxyXG4gICAgICBwb3B1cE92ZXJsYXksXHJcbiAgICB9LFxyXG4gICAgZGF0YVxyXG4gICkge1xyXG4gICAgc3VwZXIoXHJcbiAgICAgIHBvcHVwVGVtcGxhdGVTZWxlY3RvcixcclxuICAgICAgcG9wdXBTZWxlY3RvcixcclxuICAgICAge1xyXG4gICAgICAgIG9wZW5Qb3B1cENsYXNzLFxyXG4gICAgICAgIG9wZW5PdmVybGF5Q2xhc3MsXHJcbiAgICAgICAgY2xvc2VCdXR0b25TZWxlY3RvcixcclxuICAgICAgICBwb3B1cFViaWNhdGlvbixcclxuICAgICAgICBwb3B1cE92ZXJsYXksXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLl9pbWFnZVByZXZpZXdDbGFzcyA9IGltYWdlUHJldmlld0NsYXNzO1xyXG4gICAgdGhpcy5faW1hZ2VUaXRsZUNsYXNzID0gaW1hZ2VUaXRsZUNsYXNzO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2ltYWdlID0gZGF0YS5pbWFnZTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICBjb25zdCBpbWFnZVZhbHVlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9pbWFnZVByZXZpZXdDbGFzcyk7XHJcbiAgICBpbWFnZVZhbHVlLnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgaW1hZ2VWYWx1ZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgY29uc3QgaW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IodGhpcy5faW1hZ2VUaXRsZUNsYXNzKTtcclxuICAgIGltYWdlVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gZGF0YTtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcblxyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIHNldEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvciggcHJvZmlsZU5hbWUsIHByb2ZpbGVEZXNjcmlwdGlvbiApe1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gcHJvZmlsZU5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uID0gcHJvZmlsZURlc2NyaXB0aW9uO1xuICB9XG5cbiAgc2V0VXNlckluZm8oZm9ybURhdGEpIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGZvcm1EYXRhLm5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZm9ybURhdGEuYWJvdXQ7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWUtcHJvZmlsZVwiKS52YWx1ZSA9IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWJvdXQtcHJvZmlsZVwiKS52YWx1ZSA9IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgfVxufVxuIiwiLyogaW1wb3J0IGxpYmVydHkgZnJvbSBcIi4uL2ltYWdlcy9lc3RhdHVhLWRlLWxhLWxpYmVydGFkLmpwZ1wiO1xuaW1wb3J0IGdvbGRlbkdhdGUgZnJvbSBcIi4uL2ltYWdlcy9Hb2xkZW4tR2F0ZS1CcmlkZ2UuanBnXCI7XG5pbXBvcnQgbmlhZ2FyYUZhbGxzIGZyb20gXCIuLi9pbWFnZXMvQ2F0YXJhdGFzLWRlbC1uaWFnYXJhLmpwZ1wiO1xuaW1wb3J0IHJ1c2htb3JlIGZyb20gXCIuLi9pbWFnZXMvbW9udGUtcnVzaG1vcmUuanBnXCI7XG5pbXBvcnQgc3BhY2VOZWRkbGUgZnJvbSBcIi4uL2ltYWdlcy9zcGFjZS1uZWRkbGUuanBnXCI7XG5pbXBvcnQgZW1waXJlU3RhdGUgZnJvbSBcIi4uL2ltYWdlcy9lbXBpcmUtc3RhdGUtYnVpbGRpbmcuanBnXCI7ICovXG5cbi8vZWxlbWVudG9zIHF1ZSBzZSBlZGl0YW4gZW4gbGEgc2VjY2lvbiBkZSBwcm9maWxlXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItY29udGFpbmVyXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXJFZGl0QnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWltYWdlXCIpO1xuXG4vL2VsZW1lbnRvcyBkZSBlbCBwb3BVcCBkZSBlZGljacOzbiBkZSBwZXJmaWxcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5cbi8vZWxlbWVudG9zIGRlIGVsIHBvcFVwIGRlIGFncmVnYXIgbnVldmFzIHRhcmpldGFzIGRlIGx1Z2FyXG5leHBvcnQgY29uc3QgYWRkQnV0dG9uUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbi8vc2VsZWN0b3IgZGUgZWxlbWVudG8gZG9uZGUgc2UgbXVlc3RyYW4gbGFzIHRhcmpldGFzXG5leHBvcnQgY29uc3QgY2FyZHNMaXN0U2VsZWN0b3IgPSBcIi5lbGVtZW50c1wiO1xuXG4vKiBleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJFc3RhdHVhIGRlIGxhIGxpYmVydGFkXCIsXG4gICAgbGluazogbGliZXJ0eSxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXG4gICAgbGluazogZ29sZGVuR2F0ZSxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQ2F0YXJhdGFzIGRlbCBOacOhZ2FyYVwiLFxuICAgIGxpbms6IG5pYWdhcmFGYWxscyxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTW9udGUgUnVzaG1vcmVcIixcbiAgICBsaW5rOiBydXNobW9yZSxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiU3BhY2UgTmVkZGxlXCIsXG4gICAgbGluazogc3BhY2VOZWRkbGUsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkVtcGlyZSBTdGF0ZSBCdWlsZGluZ1wiLFxuICAgIGxpbms6IGVtcGlyZVN0YXRlLFxuICB9LFxuXTsgKi9cblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2NvbnRhaW5lclwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idG4tc3VibWl0XCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J0bi1zdWJtaXRfaW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxuICBlcnJvclNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXQtZXJyb3JcIlxufTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VDb25maWcgPSB7XG4gIG9wZW5Qb3B1cENsYXNzOiBcImltZy1wb3B1cF9vcGVuZWRcIixcbiAgb3Blbk92ZXJsYXlDbGFzczogXCJvdmVybGF5X29wZW5lZFwiLFxuICBjbG9zZUJ1dHRvblNlbGVjdG9yOiBcIi5pbWctcG9wdXBfX2J0bi1jbG9zZVwiLFxuICBwb3B1cFViaWNhdGlvbjogXCIuaW1nLXBvcHVwXCIsXG4gIGltYWdlUHJldmlld0NsYXNzOiBcIi5pbWctcG9wdXBfX3ByZXZpZXdcIixcbiAgaW1hZ2VUaXRsZUNsYXNzOiBcIi5pbWctcG9wdXBfX3RpdGxlXCIsXG4gIHBvcHVwT3ZlcmxheTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpLFxufTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aEZvcm1Db25maWcgPSB7XG4gIG9wZW5Qb3B1cENsYXNzOiBcInBvcHVwX29wZW5lZFwiLFxuICBvcGVuT3ZlcmxheUNsYXNzOiBcIm92ZXJsYXlfb3BlbmVkXCIsXG4gIGNsb3NlQnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idG4tY2xvc2VcIixcbiAgcG9wdXBVYmljYXRpb246IFwiLnBvcHVwXCIsXG4gIHBvcHVwT3ZlcmxheTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idG4tc3VibWl0XCIsXG59O1xuXG5leHBvcnQgY29uc3QgcG9wdXBDb25maXJtYXRpb25Db25maWcgPSB7XG4gIG9wZW5Qb3B1cENsYXNzOiBcImNvbmZpcm1hdGlvbi1wb3B1cF9vcGVuZWRcIixcbiAgb3Blbk92ZXJsYXlDbGFzczogXCJvdmVybGF5X29wZW5lZFwiLFxuICBjbG9zZUJ1dHRvblNlbGVjdG9yOiBcIi5jb25maXJtYXRpb24tcG9wdXBfX2J0bi1jbG9zZVwiLFxuICBwb3B1cFViaWNhdGlvbjogXCIuY29uZmlybWF0aW9uLXBvcHVwXCIsXG4gIHBvcHVwT3ZlcmxheTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuY29uZmlybWF0aW9uLXBvcHVwX19idG4tc3VibWl0XCIsXG59O1xuXG5leHBvcnQgY29uc3QgcG9wdXBBdmF0YXJDb25maWcgPSB7XG4gIG9wZW5Qb3B1cENsYXNzOiBcImF2YXRhci1wb3B1cF9vcGVuZWRcIixcbiAgb3Blbk92ZXJsYXlDbGFzczogXCJvdmVybGF5X29wZW5lZFwiLFxuICBjbG9zZUJ1dHRvblNlbGVjdG9yOiBcIi5hdmF0YXItcG9wdXBfX2J0bi1jbG9zZVwiLFxuICBwb3B1cFViaWNhdGlvbjogXCIuYXZhdGFyLXBvcHVwXCIsXG4gIHBvcHVwT3ZlcmxheTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5hdmF0YXItcG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5hdmF0YXItcG9wdXBfX2J0bi1zdWJtaXRcIixcbn07XG5cbmV4cG9ydCBjb25zdCBhdmF0YXJWYWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLmF2YXRhci1wb3B1cF9fY29udGFpbmVyXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLmF2YXRhci1wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmF2YXRhci1wb3B1cF9fYnRuLXN1Ym1pdFwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImF2YXRhci1wb3B1cF9fYnRuLXN1Ym1pdF9pbmFjdGl2ZVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiYXZhdGFyLXBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiYXZhdGFyLXBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbiAgZXJyb3JTZWxlY3RvcjogXCIuYXZhdGFyLXBvcHVwX19pbnB1dC1lcnJvclwiXG59OyIsIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoIHBvcHVwLCBjb25maWcgKXtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZ1xyXG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5mb3JtU2VsZWN0b3IpO1xyXG4gIH07XHJcblxyXG4gIF9zaG93RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0taW5wdXQtZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICBfaGlkZUVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcykgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1pbnB1dC1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9O1xyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcykgPT4ge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0Vycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSwgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MpO1xyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICBfaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBpbmFjdGl2ZUJ1dHRvbkNsYXNzKSA9PiB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICBidXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIGlucHV0U2VsZWN0b3IsIHN1Ym1pdEJ1dHRvblNlbGVjdG9yLCBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MsIGluYWN0aXZlQnV0dG9uQ2xhc3MpID0+IHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKSk7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3RvcilcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICAgIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yLCB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IsIHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MsIHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzLCB0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICAgIGNvbnN0IGVycm9yTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuZXJyb3JTZWxlY3RvcikpO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIH0pO1xyXG4gICAgZXJyb3JMaXN0LmZvckVhY2goKGVycm9yRWxlbWVudCkgPT4ge1xyXG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICB9KTtcclxuICB9O1xyXG59OyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25maXJtYXRpb25Qb3B1cCBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcG9wdXBUZW1wbGF0ZVNlbGVjdG9yLFxuICAgIHBvcHVwU2VsZWN0b3IsXG4gICAge1xuICAgICAgb3BlblBvcHVwQ2xhc3MsXG4gICAgICBvcGVuT3ZlcmxheUNsYXNzLFxuICAgICAgY2xvc2VCdXR0b25TZWxlY3RvcixcbiAgICAgIHBvcHVwVWJpY2F0aW9uLFxuICAgICAgcG9wdXBPdmVybGF5LFxuICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3IsXG4gICAgfSxcbiAgICBoYW5kbGVGb3JtU3VibWl0XG4gICkge1xuICAgIHN1cGVyKFxuICAgICAgcG9wdXBUZW1wbGF0ZVNlbGVjdG9yLFxuICAgICAgcG9wdXBTZWxlY3RvcixcbiAgICAgIHtcbiAgICAgICAgb3BlblBvcHVwQ2xhc3MsXG4gICAgICAgIG9wZW5PdmVybGF5Q2xhc3MsXG4gICAgICAgIGNsb3NlQnV0dG9uU2VsZWN0b3IsXG4gICAgICAgIHBvcHVwVWJpY2F0aW9uLFxuICAgICAgICBwb3B1cE92ZXJsYXksXG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICB9KVxuICB9XG5cbn0iLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCBudWxsO1xuICAgIC8vdGhpcy5fYm9keSA9IG9wdGlvbnMuYm9keSB8fCBudWxsO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7IC8vdG9kbyBib3JyYXJcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH11c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOyAvL3RvZG8gYm9ycmFyXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfXVzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxuICAgICAgfSksXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pXG4gICAgLyogLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOyAvL3RvZG8gYm9ycmFyXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KSAqL1xuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xuICB9XG5cblxuXG4gIC8qIHNldFVzZXJBdmF0YXIoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfXVzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhcixcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG4gIH0gKi9cblxuIC8qICBzZXRVc2VyQ2FyZHMoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH0gKi9cblxuIC8qICBzZXRVc2VyTGlrZXMoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzL2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH0gKi9cbn1cbiIsImltcG9ydCBcIi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtcyBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1zLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgLy9pbml0aWFsQ2FyZHMsXG4gIGNhcmRzTGlzdFNlbGVjdG9yLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZUF2YXRhckltYWdlLFxuICBwb3B1cEltYWdlQ29uZmlnLFxuICBwb3B1cFdpdGhGb3JtQ29uZmlnLFxuICBwb3B1cENvbmZpcm1hdGlvbkNvbmZpZyxcbiAgcG9wdXBBdmF0YXJDb25maWcsXG4gIHByb2ZpbGVEZXNjcmlwdGlvblxufSBmcm9tIFwiLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IGFkZEJ1dHRvbkFjdGlvbiwgZWRpdEF2YXRhckFjdGlvbiwgZWRpdEF2YXRhckhvdmVyLCBlZGl0QnV0dG9uQWN0aW9uIH0gZnJvbSBcIi4vdXRpbHMvdXRpbHMuanNcIjtcbmltcG9ydCBDb25maXJtYXRpb25Qb3B1cCBmcm9tIFwiLi9jb21wb25lbnRzL0NvbmZpcm1hdGlvblBvcHVwLmpzXCI7XG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG4vL2NyZWEgaW5zdGFuY2lhIGRlIGxhIGNsYXNlIEFwaVxuZXhwb3J0IGNvbnN0IGFwaUluc3RhbmNlID0gbmV3IEFwaSAoe1xuICBiYXNlVXJsIDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc18xMS9cIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiMDRkMTg3NWYtYzU3OS00NTY4LTk2ZTItZmJmODg4OGMxZjE5XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgfVxufSlcblxuLy9jcmVhIGluc3RhbmNpYSBkZSBsYSBjbGFzZSBVc2VySW5mb1xuZXhwb3J0IGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVOYW1lLCBwcm9maWxlRGVzY3JpcHRpb24pO1xuXG4vL2NyZWEgaW5zdGFuY2lhIGRlIGxhIGNsYXNlIFBvcHVwV2l0aEZvcm1zIHBhcmEgZWwgcG9wdXAgZGVsIHBlcmZpbFxuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtcyhcbiAgXCIjcG9wdXBQcm9maWxlVGVtcGxhdGVcIixcbiAgXCIjcG9wdXBfX3Byb2ZpbGVcIixcbiAgcG9wdXBXaXRoRm9ybUNvbmZpZyxcbiAgKGZvcm1EYXRhKSA9PiB7XG4gICAgLy91c2VySW5mby5zZXRVc2VySW5mbyhmb3JtRGF0YSk7XG4gICAgYXBpSW5zdGFuY2Uuc2V0VXNlckluZm8oZm9ybURhdGEpLnRoZW4oZGF0YSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcbiAgICB9KVxuICAgIC50aGVuKFxuICAgICAgcG9wdXBQcm9maWxlLmNsb3NlKClcbiAgICApXG4gIH1cbik7XG5cbi8vY3JlYSBpbnN0YW5jaWEgZGUgbGEgY2xhc2UgUG9wdXBXaXRoRm9ybXMgcGFyYSBlbCBwb3B1cCBkZSBhZ3JlZ2FyIGx1Z2FyXG5leHBvcnQgY29uc3QgcG9wdXBQbGFjZSA9IG5ldyBQb3B1cFdpdGhGb3JtcyhcbiAgXCIjcG9wdXBQbGFjZVRlbXBsYXRlXCIsXG4gIFwiI3BvcHVwX19wbGFjZVwiLFxuICBwb3B1cFdpdGhGb3JtQ29uZmlnLFxuICAoZm9ybURhdGEpID0+IHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgICBmb3JtRGF0YSxcbiAgICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICAgIChldnQpID0+IHtcbiAgICAgICAgY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcbiAgICAgICAgICBcIiNwb3B1cEltYWdlVGVtcGxhdGVcIixcbiAgICAgICAgICBcIiNwb3B1cF9faW1hZ2VcIixcbiAgICAgICAgICBwb3B1cEltYWdlQ29uZmlnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IGV2dC50YXJnZXQuYWx0LFxuICAgICAgICAgICAgaW1hZ2U6IGV2dC50YXJnZXQuY3VycmVudFNyYyxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHBvcHVwID0gcG9wdXBJbWFnZS5nZW5lcmF0ZVBvcHVwKCk7XG4gICAgICAgIHBvcHVwSW1hZ2Uub3BlbigpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwSW1hZ2VDb25maWcucG9wdXBVYmljYXRpb24pLnByZXBlbmQocG9wdXApO1xuICAgICAgfSxcbiAgICAgIChldnQpID0+IHtcbiAgICAgICAgY29uc3QgY29uZmlybWF0aW9uUG9wdXAgPSBuZXcgQ29uZmlybWF0aW9uUG9wdXAoXG4gICAgICAgICAgXCIjcG9wdXBDb25maXJtYXRpb25UZW1wbGF0ZVwiLFxuICAgICAgICAgIFwiI3BvcHVwX19jb25maXJtYXRpb25cIixcbiAgICAgICAgICBwb3B1cENvbmZpcm1hdGlvbkNvbmZpZyxcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBldnQudGFyZ2V0LmNsb3Nlc3QoXCIuZWxlbWVudHNfX2NhcmRcIikucmVtb3ZlKCk7XG4gICAgICAgICAgICAvKiBsZXQgaW5kaWNlRWxpbWluYXIgPSBpbml0aWFsQ2FyZHMuZmluZEluZGV4KFxuICAgICAgICAgICAgICAoZWxlbWVudCkgPT4gZWxlbWVudC5pZCA9PT0gZXZ0LnRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlkXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaW5pdGlhbENhcmRzLnNwbGljZShpbmRpY2VFbGltaW5hciwgMSk7ICovXG4gICAgICAgICAgICBjb25maXJtYXRpb25Qb3B1cC5jbG9zZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBjb25zdCBwb3B1cCA9IGNvbmZpcm1hdGlvblBvcHVwLmdlbmVyYXRlUG9wdXAoKTtcbiAgICAgICAgY29uZmlybWF0aW9uUG9wdXAub3BlbigpO1xuICAgICAgICBkb2N1bWVudFxuICAgICAgICAucXVlcnlTZWxlY3Rvcihwb3B1cENvbmZpcm1hdGlvbkNvbmZpZy5wb3B1cFViaWNhdGlvbilcbiAgICAgICAgLnByZXBlbmQocG9wdXApO1xuICAgICAgfVxuICAgICk7XG4gICAgLyogZm9ybURhdGEuaWQgPSBjYXJkLl9pZDtcbiAgICBpbml0aWFsQ2FyZHMucHVzaChmb3JtRGF0YSk7ICovXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgIGNhcmRzTGlzdC5zZXRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICBwb3B1cFBsYWNlLmNsb3NlKCk7XG4gIH1cbik7XG5cbi8vY3JlYSBpbnN0YW5jaWEgZGUgbGEgY2xhc2UgUG9wdXBXaXRoRm9ybXMgcGFyYSBlbCBwb3B1cCBkZSBlZGl0YXIgaW1hZ2VuIGRlIEF2YXRhclxuZXhwb3J0IGNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm1zIChcbiAgXCIjcG9wdXBBdmF0YXJUZW1wbGF0ZVwiLFxuICBcIiNwb3B1cF9fYXZhdGFyXCIsXG4gIHBvcHVwQXZhdGFyQ29uZmlnLFxuICAoZm9ybURhdGEpID0+IHtcbiAgICBwcm9maWxlQXZhdGFySW1hZ2Uuc3JjID0gZm9ybURhdGEuYXZhdGFyO1xuICAgIHBvcHVwQXZhdGFyLmNsb3NlKCk7XG4gIH1cbik7XG5cbi8vZWplY3V0YSBmdW5jacOzbiBwYXJhIG9idGVuZXIgZGF0b3MgZGUgbGFzIHRhcmpldGFzIGRlc2RlIGVsIHNlcnZpZG9yXG5hcGlJbnN0YW5jZS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKGRhdGEgPT4ge1xuXG4gIC8vRnVuY2nDs24gcGFyYSByZW5kZXJpemFyIGxhcyB0YXJqZXRhcyBkZWwgc2Vydmlkb3JcbiAgY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oXG4gICAge1xuICAgICAgZGF0YTogZGF0YSxcbiAgICAgIHJlbmRlcmVyOiAoaW5pdGlhbENhcmQpID0+IHtcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgICAgICAgIGluaXRpYWxDYXJkLFxuICAgICAgICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICAgICAgICAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFxuICAgICAgICAgICAgICBcIiNwb3B1cEltYWdlVGVtcGxhdGVcIixcbiAgICAgICAgICAgICAgXCIjcG9wdXBfX2ltYWdlXCIsXG4gICAgICAgICAgICAgIHBvcHVwSW1hZ2VDb25maWcsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBldnQudGFyZ2V0LmFsdCxcbiAgICAgICAgICAgICAgICBpbWFnZTogZXZ0LnRhcmdldC5jdXJyZW50U3JjLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgcG9wdXAgPSBwb3B1cEltYWdlLmdlbmVyYXRlUG9wdXAoKTtcbiAgICAgICAgICAgIHBvcHVwSW1hZ2Uub3BlbigpO1xuICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IocG9wdXBJbWFnZUNvbmZpZy5wb3B1cFViaWNhdGlvbilcbiAgICAgICAgICAgICAgLnByZXBlbmQocG9wdXApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgKGV2dCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uUG9wdXAgPSBuZXcgQ29uZmlybWF0aW9uUG9wdXAoXG4gICAgICAgICAgICAgIFwiI3BvcHVwQ29uZmlybWF0aW9uVGVtcGxhdGVcIixcbiAgICAgICAgICAgICAgXCIjcG9wdXBfX2NvbmZpcm1hdGlvblwiLFxuICAgICAgICAgICAgICBwb3B1cENvbmZpcm1hdGlvbkNvbmZpZyxcbiAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2dC50YXJnZXQuY2xvc2VzdChcIi5lbGVtZW50c19fY2FyZFwiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgLyogICBsZXQgaW5kaWNlRWxpbWluYXIgPSBpbml0aWFsQ2FyZHMuZmluZEluZGV4KFxuICAgICAgICAgICAgICAgICAgKGVsZW1lbnQpID0+IGVsZW1lbnQuaWQgPT09IGV2dC50YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZy5pZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaW5pdGlhbENhcmRzLnNwbGljZShpbmRpY2VFbGltaW5hciwgMSk7ICovXG4gICAgICAgICAgICAgICAgY29uZmlybWF0aW9uUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY29uc3QgcG9wdXAgPSBjb25maXJtYXRpb25Qb3B1cC5nZW5lcmF0ZVBvcHVwKClcbiAgICAgICAgICAgIGNvbmZpcm1hdGlvblBvcHVwLm9wZW4oKTtcbiAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcihwb3B1cENvbmZpcm1hdGlvbkNvbmZpZy5wb3B1cFViaWNhdGlvbilcbiAgICAgICAgICAgIC5wcmVwZW5kKHBvcHVwKTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIC8vaW5pdGlhbENhcmQuaWQgPSBjYXJkLl9pZDtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgICAgICBjYXJkc0xpc3Quc2V0SXRlbShjYXJkRWxlbWVudCk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgY2FyZHNMaXN0U2VsZWN0b3JcbiAgKTtcblxuICAvL3JlbmRlcml6YXIgbGFzIHRhcmpldGFzIGluaWNpYWxlc1xuICBjYXJkc0xpc3QucmVuZGVySXRlbXMoKTtcbn0pO1xuXG4vL2VqZWN1dGEgZnVuY2nDs24gcGFyYSBvYnRlbmVyIGRhdG9zIGRlbCBwZXJmaWwgZGUgdXN1YXJpbyBkZXNkZSBzZXJ2aWRvciB5IHJlbmRlcml6YXJsb3NcbmFwaUluc3RhbmNlLmdldFVzZXJJbmZvKCkudGhlbihkYXRhID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG59KVxuXG5cblxuLy9lamVjdWNpw7NuIGRlIGZ1bmNpw7NuIHF1ZSBhYnJlIGxhIHZlbnRhbmEgcG9wdXAgUHJvZmlsZSBhbCBkYXIgY2xpY2sgZW4gZWwgaWNvbm8gZGVsIGzDoXBpeiAoZWRpdGFyKVxuZWRpdEJ1dHRvbkFjdGlvbigpO1xuXG4vL2VqZWN1Y2nDs24gZGUgZnVuY2nDs24gcXVlIGFicmUgbGEgdmVudGFuYSBwb3B1cCBQbGFjZSBhbCBkYXIgY2xpY2sgZW4gZWwgaWNvbm8gZGVsICsgKGFncmVnYXIpXG5hZGRCdXR0b25BY3Rpb24oKTtcblxuLy9lamV1Y2nDs24gZGUgZnVuY2nDs24gcXVlIG11ZXN0cmEgZWwgYm90w7NuIGRlIGVkaXRhciBlbCBhdmF0YXJcbmVkaXRBdmF0YXJIb3ZlcigpO1xuXG4vL2VqZXVjacOzbiBkZSBmdW5jacOzbiBxdWUgYWJyZSBsYSB2ZW50YW5hIHBvcHVwIGRlIGVkaXRhciBBdmF0YXIgYWwgZGFyIGNsaWNrIGVuIGxhIGltYWfDqW4gZGUgcGVyZmlsXG5lZGl0QXZhdGFyQWN0aW9uKCk7XG5cbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IHBvcHVwQXZhdGFyLCBwb3B1cFBsYWNlLCBwb3B1cFByb2ZpbGUsIHVzZXJJbmZvIH0gZnJvbSBcIi4uL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBhZGRCdXR0b25QbGFjZSxcbiAgZWRpdEJ1dHRvblByb2ZpbGUsXG4gIHByb2ZpbGVBdmF0YXIsXG4gIHByb2ZpbGVBdmF0YXJFZGl0QnV0dG9uLFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBhdmF0YXJWYWxpZGF0aW9uQ29uZmlnLFxufSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcbi8vZnVuY2nDs24gcXVlIGFicmUgbGEgdmVudGFuYSBwb3B1cCBQcm9maWxlIGFsIGRhciBjbGljayBlbiBlbCBpY29ubyBkZWwgbMOhcGl6IChlZGl0YXIpXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbkFjdGlvbiA9ICgpID0+IHtcbiAgZWRpdEJ1dHRvblByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCBwb3B1cCA9IHBvcHVwUHJvZmlsZS5nZW5lcmF0ZVBvcHVwKCk7XG4gICAgcG9wdXBQcm9maWxlLm9wZW4oKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwXCIpLnByZXBlbmQocG9wdXApO1xuICAgIHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gICAgbmV3IEZvcm1WYWxpZGF0b3IocG9wdXAsIHZhbGlkYXRpb25Db25maWcpLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgICBwb3B1cFByb2ZpbGUuZGlzYWJsZUNvbmZpcm1CdXR0b24oKTtcbiAgfSk7XG59O1xuXG4vL2Z1bmNpw7NuIHF1ZSBhYnJlIGxhIHZlbnRhbmEgcG9wdXAgUGxhY2UgYWwgZGFyIGNsaWNrIGVuIGVsIGljb25vIGRlbCArIChhZ3JlZ2FyKVxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbkFjdGlvbiA9ICgpID0+IHtcbiAgYWRkQnV0dG9uUGxhY2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCBwb3B1cCA9IHBvcHVwUGxhY2UuZ2VuZXJhdGVQb3B1cCgpO1xuICAgIHBvcHVwUGxhY2Uub3BlbigpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIikucHJlcGVuZChwb3B1cCk7XG4gICAgbmV3IEZvcm1WYWxpZGF0b3IocG9wdXAsIHZhbGlkYXRpb25Db25maWcpLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG4vL2Z1bmNpw7NuIHF1ZSBtdWVzdHJhIGVsIGJvdMOzbiBkZSBlZGl0YXIgZWwgYXZhdGFyXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhckhvdmVyID0gKCkgPT4ge1xuICBwcm9maWxlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuICAgIHByb2ZpbGVBdmF0YXJFZGl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwcm9maWxlX19hdmF0YXItZWRpdF9zaG93blwiKTtcbiAgfSk7XG4gIHByb2ZpbGVBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsICgpID0+IHtcbiAgICBwcm9maWxlQXZhdGFyRWRpdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwicHJvZmlsZV9fYXZhdGFyLWVkaXRfc2hvd25cIik7XG4gIH0pO1xufTtcblxuLy9mdW5jacOzbiBxdWUgYWJyZSBsYSB2ZW50YW5hIHBvcHVwIGRlIGVkaXRhciBBdmF0YXIgYWwgZGFyIGNsaWNrIGVuIGxhIGltYWfDqW4gZGUgcGVyZmlsXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhckFjdGlvbiA9ICgpID0+IHtcbiAgcHJvZmlsZUF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCBwb3B1cCA9IHBvcHVwQXZhdGFyLmdlbmVyYXRlUG9wdXAoKTtcbiAgICBwb3B1cEF2YXRhci5vcGVuKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hdmF0YXItcG9wdXBcIikucHJlcGVuZChwb3B1cCk7XG4gICAgbmV3IEZvcm1WYWxpZGF0b3IocG9wdXAsIGF2YXRhclZhbGlkYXRpb25Db25maWcpLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfaWQiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsInZhbHVlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl90aGlzIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBPdmVybGF5IiwiX2VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJ0b2dnbGUiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJzZXRBdHRyaWJ1dGUiLCJ0ZXh0Q29udGVudCIsIlBvcHVwIiwicG9wdXBUZW1wbGF0ZVNlbGVjdG9yIiwicG9wdXBTZWxlY3RvciIsIl9yZWYiLCJvcGVuUG9wdXBDbGFzcyIsIm9wZW5PdmVybGF5Q2xhc3MiLCJjbG9zZUJ1dHRvblNlbGVjdG9yIiwicG9wdXBVYmljYXRpb24iLCJwb3B1cE92ZXJsYXkiLCJfcG9wdXBUZW1wbGF0ZVNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJfb3BlblBvcHVwQ2xhc3MiLCJfb3ZlcmxheU9wZW5DbGFzcyIsIl9jbG9zZUJ1dHRvblNlbGVjdG9yIiwiX3BvcHVwVWJpY2F0aW9uIiwiX3BvcHVwIiwiYWRkIiwicmVtb3ZlIiwiY2xvc2VzdCIsImNsb3NlIiwiUG9wdXBXaXRoRm9ybXMiLCJfUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0IiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2NhbGxTdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5oZXJpdHMiLCJfdGhpczIiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9mb3JtVmFsdWVzIiwiZm9yRWFjaCIsImlucHV0IiwiX3RoaXMzIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJpbWFnZVByZXZpZXdDbGFzcyIsImltYWdlVGl0bGVDbGFzcyIsIl9pbWFnZVByZXZpZXdDbGFzcyIsIl9pbWFnZVRpdGxlQ2xhc3MiLCJfaW1hZ2UiLCJpbWFnZSIsImltYWdlVmFsdWUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlVzZXJJbmZvIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZURlc2NyaXB0aW9uIiwiZm9ybURhdGEiLCJhYm91dCIsInByb2ZpbGVBdmF0YXIiLCJwcm9maWxlQXZhdGFyRWRpdEJ1dHRvbiIsInByb2ZpbGVBdmF0YXJJbWFnZSIsImVkaXRCdXR0b25Qcm9maWxlIiwiYWRkQnV0dG9uUGxhY2UiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvclNlbGVjdG9yIiwicG9wdXBJbWFnZUNvbmZpZyIsInBvcHVwV2l0aEZvcm1Db25maWciLCJwb3B1cENvbmZpcm1hdGlvbkNvbmZpZyIsInBvcHVwQXZhdGFyQ29uZmlnIiwiYXZhdGFyVmFsaWRhdGlvbkNvbmZpZyIsIkZvcm1WYWxpZGF0b3IiLCJfY3JlYXRlQ2xhc3MiLCJwb3B1cCIsImNvbmZpZyIsIl9kZWZpbmVQcm9wZXJ0eSIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVFcnJvciIsIl9zaG93RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0TGlzdCIsInNvbWUiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsInJlbW92ZUF0dHJpYnV0ZSIsIkFycmF5IiwiZnJvbSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfY29uZmlnIiwiZXJyb3JMaXN0IiwiQ29uZmlybWF0aW9uUG9wdXAiLCJhcGlJbnN0YW5jZSIsIkFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJwb3B1cFByb2ZpbGUiLCJzZXRVc2VySW5mbyIsInBvcHVwUGxhY2UiLCJjYXJkRWxlbWVudCIsInBvcHVwSW1hZ2UiLCJjdXJyZW50U3JjIiwiZ2VuZXJhdGVQb3B1cCIsIm9wZW4iLCJjb25maXJtYXRpb25Qb3B1cCIsImdlbmVyYXRlQ2FyZCIsImNhcmRzTGlzdCIsInNldEl0ZW0iLCJwb3B1cEF2YXRhciIsImF2YXRhciIsImdldEluaXRpYWxDYXJkcyIsImluaXRpYWxDYXJkIiwicmVuZGVySXRlbXMiLCJnZXRVc2VySW5mbyIsImVuYWJsZVZhbGlkYXRpb24iLCJkaXNhYmxlQ29uZmlybUJ1dHRvbiJdLCJzb3VyY2VSb290IjoiIn0=